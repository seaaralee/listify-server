import e from"react";import{useCell as t,useValue as n,useSetValueCallback as s,useSetCellCallback as l,useValueIds as a,ValueView as r,useStoreOrStoreById as o,useRowCount as i,useSortedRowIds as d,useTableCellIds as c,useIndexesOrIndexesById as u,useSliceRowIds as h,useRelationshipsOrRelationshipsById as m,useRowIds as g,useResultRowCount as p,useResultSortedRowIds as b,useResultTableCellIds as f,useRemoteRowId as y,CellView as I,ResultCellView as w,useIndexes as v,useIndexIds as C,useSliceIds as k,useMetrics as x,useMetricIds as T,useMetric as S,useQueries as q,useQueryIds as N,useRelationships as V,useRelationshipIds as L,useStore as M,useTableIds as R,useValues as E,useStoreIds as z,useMetricsIds as $,useIndexesIds as A,useRelationshipsIds as J,useQueriesIds as O,useCreateStore as P,useCreatePersister as D}from"../../ui-react/with-schemas/index.js";const F=e=>typeof e,j="",B=F(j),H=F(!0),W=F(0),Q=F(F),G="type",K="default",U="Has",X="Ids",Y="Table",Z=Y+"s",_=Y+X,ee="Row",te=ee+"Count",ne=ee+X,se="Cell",le=se+X,ae="Value",re=ae+"s",oe=ae+X,ie="currentTarget",de="value",ce=e=>j+e,ue=globalThis.window,he=Math,me=he.min,ge=he.floor,pe=isFinite,be=e=>null==e,fe=(e,t,n)=>be(e)?n?.():t(e),ye=e=>e==B||e==H,Ie=e=>F(e)==Q,we=e=>Array.isArray(e),ve=(e,t,n)=>e.slice(t,n),Ce=e=>e.length,ke=e=>{throw Error(e)},{PureComponent:xe,Fragment:Te,createContext:Se,createElement:qe,useCallback:Ne,useContext:Ve,useEffect:Le,useLayoutEffect:Me,useMemo:Re,useRef:Ee,useState:ze,useSyncExternalStore:$e}=e,Ae=(e,...t)=>be(e)?{}:e(...t),Je=(e,t)=>e.sort(t),Oe=(e,t)=>e.forEach(t),Pe=(e,t)=>e.map(t),De=e=>0==Ce(e),Fe=(e,...t)=>e.push(...t),je=e=>e.shift(),Be=Object,He=e=>Be.getPrototypeOf(e),We=Be.entries,Qe=Be.isFrozen,Ge=e=>!be(e)&&fe(He(e),(e=>e==Be.prototype||be(He(e))),(()=>!0)),Ke=Be.keys,Ue=Be.freeze,Xe=(e=[])=>Be.fromEntries(e),Ye=(e,t)=>t in e,Ze=(e,t)=>(delete e[t],e),_e=(e,t)=>Pe(We(e),(([e,n])=>t(n,e))),et=e=>Ge(e)&&0==(e=>Ce(Ke(e)))(e),tt=(e,t,n,s=0)=>be(e)||!Ge(e)||!s&&et(e)||Qe(e)?(n?.(),!1):(_e(e,((n,s)=>{t(n,s)||Ze(e,s)})),!!s||!et(e)),nt=JSON.stringify,st=JSON.parse,lt=e=>nt(e,((e,t)=>t instanceof Map?Be.fromEntries([...t]):t)),at="tinybaseInspector",rt="TinyBase Inspector",ot=["left","top","bottom","right","full"],it="state",dt="sort",ct="open",ut="position",ht=ct,mt="editable",gt=(...e)=>lt(e),pt=(e,t)=>Pe(Je([...e]),t),bt=(e,n)=>[!!t(it,e,mt,n),Ne((t=>{n.setCell(it,e,mt,(e=>!e)),t.preventDefault()}),[n,e])],ft="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",yt='content:url("',It=yt+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",wt='</svg>")',vt=yt+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",Ct=Pe([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,n,s])=>It+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${n}' height='${s}' fill='white'/>`+wt)),kt=It+"<path d='M20 20l60 60M20 80l60-60' />"+wt,xt=It+`<path d='${ft}' />`+wt,Tt=It+`<path d='${ft}M20 20l60 60' />`+wt,St="*::-webkit-scrollbar",qt=((e,t="")=>e.join(t))(_e({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[St]:"width:0.5rem;height:0.5rem;",[St+"-track"]:"background:#111",[St+"-thumb"]:"background:#999;border:1px solid #111",[St+"-thumb:hover"]:"background:#fff",[St+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+vt,...Xe(Pe(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e]))),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...Xe(Pe(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e]))),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":vt,"header>img:nth-of-type(6)":kt,...Xe(Pe(Ct,((e,t)=>[`header>img[data-id='${t}']`,e]))),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":xt,"details[open]>summary img.done":Tt,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${at} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},((e,t)=>e?`#${at} ${t}{${e}}`:""))),Nt=({s:e})=>{const t=n(ut,e)??1,l=s(ht,(()=>!0),[],e);return n(ht,e)?null:qe("img",{onClick:l,title:rt,"data-position":t})},Vt=({uniqueId:e,summary:n,editable:s,handleEditable:a,children:r,s:o})=>{const i=!!t(it,e,ct,o),d=l(it,e,ct,(e=>e[ie].open),[],o);return qe("details",{open:i,onToggle:d},qe("summary",null,n,a?qe("img",{onClick:a,className:s?"done":"edit"}):null),r)},Lt=e=>{const t=F(e);return ye(t)||t==W&&pe(e)?t:void 0},Mt=(e,t,n,s,l)=>be(l)?e.delCell(t,n,s,!0):e.setCell(t,n,s,l),Rt=(e,t,n)=>be(n)?e.delValue(t):e.setValue(t,n),Et=(e,t,n,s)=>e==B?t:e==W?n:s,zt="editable",$t=(e,t)=>Pe(c(e,t),(t=>e+"."+t)),At=(e,t,n)=>{const s=Ne(e,t);return n?s:void 0},Jt=(...e)=>Re((()=>e),e),Ot=(e,t)=>Re((()=>({store:e,tableId:t})),[e,t]),Pt=(e,t)=>Re((()=>({queries:e,queryId:t})),[e,t]),Dt=(e,t=!1,n,s=0,l,a,r,o)=>{const[[i,d,c],u]=ze([e,t,s]),h=Ne((e=>{u(e),o?.(e)}),[o]),m=At((e=>h([e,e==i&&!d,c])),[h,i,d,c],n),g=Ne((e=>h([i,d,e])),[h,i,d]),p=!0===r?_t:r;return[[i,d,c],m,Re((()=>!1===r?null:qe(p,{offset:c,limit:l,total:a,onChange:g})),[r,p,c,l,a,g])]},Ft=(e,t,n)=>Re((()=>{const s=t??e;return l=we(s)?Xe(Pe(s,(e=>[e,e]))):s,a=(e,t)=>{return{label:t,component:n,...(s=e,F(s)==B?{label:e}:e)};var s},Xe(_e(l,((e,t)=>[t,a(e,t)])));var l,a}),[t,n,e]),jt=({className:e,headerRow:t,idColumn:n,params:[s,l,a,r,o,i]})=>qe("table",{className:e},i?qe("caption",null,i):null,!1===t?null:qe("thead",null,qe("tr",null,!1===n?null:qe(Bt,{sort:r??[],label:"Id",onClick:o}),_e(s,(({label:e},t)=>qe(Bt,{key:t,cellId:t,label:e,sort:r??[],onClick:o}))))),qe("tbody",null,Pe(a,(e=>qe("tr",{key:e},!1===n?null:qe("th",null,e),_e(s,(({component:t,getComponentProps:n},s)=>qe("td",{key:s},qe(t,{...Ae(n,e,s),...l,rowId:e,cellId:s}))))))))),Bt=({cellId:e,sort:[t,n],label:s=e??j,onClick:l})=>qe("th",{onClick:At((()=>l?.(e)),[l,e],l),className:be(n)||t!=e?void 0:`sorted ${n?"de":"a"}scending`},be(n)||t!=e?null:(n?"↓":"↑")+" ",s),Ht=({localRowId:e,params:[t,n,s,l,a,r,o]})=>{const i=y(a,e,r);return qe("tr",null,!1===t?null:qe(Te,null,qe("th",null,e),qe("th",null,i)),_e(n,(({component:t,getComponentProps:n},a)=>{const[r,d]=((e,t="",n)=>e.split(t,n))(a,".",2),c=r===s?e:r===l?i:null;return be(c)?null:qe("td",{key:a},qe(t,{...Ae(n,c,d),store:o,tableId:r,rowId:c,cellId:d}))})))},Wt=({thing:e,onThingChange:t,className:n,hasSchema:s,showType:l=!0})=>{const[a,r]=ze(),[o,i]=ze(),[d,c]=ze(),[u,h]=ze(),[m,g]=ze();o!==e&&(r(Lt(e)),i(e),c(e+""),h(Number(e)||0),g(!!e));const p=Ne(((e,n)=>{n(e),i(e),t(e)}),[t]),b=Ne((()=>{if(!s?.()){const e=Et(a,W,H,B),n=Et(e,d,u,m);r(e),i(n),t(n)}}),[s,t,d,u,m,a]);return qe("div",{className:n},l?qe("button",{className:a,onClick:b},a):null,Et(a,qe("input",{key:a,value:d,onChange:Ne((e=>p(e[ie][de]+"",c)),[p])}),qe("input",{key:a,type:"number",value:u,onChange:Ne((e=>p(Number(e[ie][de]||0),h)),[p])}),qe("input",{key:a,type:"checkbox",checked:m,onChange:Ne((e=>p(!!e[ie].checked,g)),[p])})))},Qt=({tableId:e,cellId:t,descending:n,offset:s,limit:l,store:a,editable:r,sortOnClick:o,paginator:u=!1,onChange:h,customCells:m,...g})=>{const[p,b,f]=Dt(t,n,o,s,l,i(e,a),u,h);return qe(jt,{...g,params:Jt(Ft(c(e,a),m,r?Yt:I),Ot(a,e),d(e,...p,l,a),p,b,f)})},Gt=({store:e,editable:t=!1,valueComponent:n=(t?Zt:r),getValueComponentProps:s,className:l,headerRow:o,idColumn:i})=>qe("table",{className:l},!1===o?null:qe("thead",null,qe("tr",null,!1===i?null:qe("th",null,"Id"),qe("th",null,ae))),qe("tbody",null,Pe(a(e),(t=>qe("tr",{key:t},!1===i?null:qe("th",null,t),qe("td",null,qe(n,{...Ae(s,t),valueId:t,store:e}))))))),Kt=({indexId:e,sliceId:t,indexes:n,editable:s,customCells:l,...a})=>{const[r,o,i]=((e,t)=>[e,e?.getStore(),e?.getTableId(t)])(u(n),e);return qe(jt,{...a,params:Jt(Ft(c(i,o),l,s?Yt:I),Ot(o,i),h(e,t,r))})},Ut=({relationshipId:e,relationships:t,editable:n,customCells:s,className:l,headerRow:a,idColumn:r=!0})=>{const[o,i,d,c]=((e,t)=>[e,e?.getStore(),e?.getLocalTableId(t),e?.getRemoteTableId(t)])(m(t),e),u=Ft([...$t(d,i),...$t(c,i)],s,n?Yt:I),h=Jt(r,u,d,c,e,o,i);return qe("table",{className:l},!1===a?null:qe("thead",null,qe("tr",null,!1===r?null:qe(Te,null,qe("th",null,d,".Id"),qe("th",null,c,".Id")),_e(u,(({label:e},t)=>qe("th",{key:t},e))))),qe("tbody",null,Pe(g(d,i),(e=>qe(Ht,{key:e,localRowId:e,params:h})))))},Xt=({queryId:e,cellId:t,descending:n,offset:s,limit:l,queries:a,sortOnClick:r,paginator:o=!1,customCells:i,onChange:d,...c})=>{const[u,h,m]=Dt(t,n,r,s,l,p(e,a),o,d);return qe(jt,{...c,params:Jt(Ft(f(e,a),i,w),Pt(a,e),b(e,...u,l,a),u,h,m)})},Yt=({tableId:e,rowId:n,cellId:s,store:a,className:r,showType:i})=>qe(Wt,{thing:t(e,n,s,a),onThingChange:l(e,n,s,(e=>e),[],a),className:r??zt+se,showType:i,hasSchema:o(a)?.hasTablesSchema}),Zt=({valueId:e,store:t,className:l,showType:a})=>qe(Wt,{thing:n(e,t),onThingChange:s(e,(e=>e),[],t),className:l??zt+ae,showType:a,hasSchema:o(t)?.hasValuesSchema}),_t=({onChange:e,total:t,offset:n=0,limit:s=t,singular:l="row",plural:a=l+"s"})=>{(n>t||n<0)&&(n=0,e(0));const r=At((()=>e(n-s)),[e,n,s],n>0),o=At((()=>e(n+s)),[e,n,s],n+s<t);return qe(Te,null,t>s&&qe(Te,null,qe("button",{className:"previous",disabled:0==n,onClick:r},"←"),qe("button",{className:"next",disabled:n+s>=t,onClick:o},"→"),n+1," to ",me(t,n+s)," of "),t," ",1!=t?a:l)},en=({indexes:e,indexesId:t,indexId:n,s:s})=>qe(Vt,{uniqueId:gt("i",t,n),summary:"Index: "+n,s:s},Pe(k(n,e),(l=>qe(tn,{indexes:e,indexesId:t,indexId:n,sliceId:l,s:s,key:l})))),tn=({indexes:e,indexesId:t,indexId:n,sliceId:s,s:l})=>{const a=gt("i",t,n,s),[r,o]=bt(a,l);return qe(Vt,{uniqueId:a,summary:"Slice: "+s,editable:r,handleEditable:o,s:l},qe(Kt,{sliceId:s,indexId:n,indexes:e,editable:r}))},nn=({indexesId:e,s:t})=>{const n=v(e),s=C(n);return be(n)?null:qe(Vt,{uniqueId:gt("i",e),summary:"Indexes: "+(e??K),s:t},De(s)?"No indexes defined":pt(s,(s=>qe(en,{indexes:n,indexesId:e,indexId:s,s:t,key:s}))))},sn=({metrics:e,metricId:t})=>qe("tr",null,qe("th",null,t),qe("td",null,e?.getTableId(t)),qe("td",null,S(t,e))),ln=({metricsId:e,s:t})=>{const n=x(e),s=T(n);return be(n)?null:qe(Vt,{uniqueId:gt("m",e),summary:"Metrics: "+(e??K),s:t},De(s)?"No metrics defined":qe("table",null,qe("thead",null,qe("th",null,"Metric Id"),qe("th",null,"Table Id"),qe("th",null,"Metric")),qe("tbody",null,Pe(s,(e=>qe(sn,{metrics:n,metricId:e,key:e}))))))},an=({queries:e,queriesId:n,queryId:s,s:a})=>{const r=gt("q",n,s),[o,i,d]=st(t(it,r,dt,a)??"[]"),c=l(it,r,dt,lt,[],a);return qe(Vt,{uniqueId:r,summary:"Query: "+s,s:a},qe(Xt,{queryId:s,queries:e,cellId:o,descending:i,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:c}))},rn=({queriesId:e,s:t})=>{const n=q(e),s=N(n);return be(n)?null:qe(Vt,{uniqueId:gt("q",e),summary:"Queries: "+(e??K),s:t},De(s)?"No queries defined":pt(s,(s=>qe(an,{queries:n,queriesId:e,queryId:s,s:t,key:s}))))},on=({relationships:e,relationshipsId:t,relationshipId:n,s:s})=>{const l=gt("r",t,n),[a,r]=bt(l,s);return qe(Vt,{uniqueId:l,summary:"Relationship: "+n,editable:a,handleEditable:r,s:s},qe(Ut,{relationshipId:n,relationships:e,editable:a}))},dn=({relationshipsId:e,s:t})=>{const n=V(e),s=L(n);return be(n)?null:qe(Vt,{uniqueId:gt("r",e),summary:"Relationships: "+(e??K),s:t},De(s)?"No relationships defined":pt(s,(s=>qe(on,{relationships:n,relationshipsId:e,relationshipId:s,s:t,key:s}))))},cn=({tableId:e,store:n,storeId:s,s:a})=>{const r=gt("t",s,e),[o,i,d]=st(t(it,r,dt,a)??"[]"),c=l(it,r,dt,lt,[],a),[u,h]=bt(r,a);return qe(Vt,{uniqueId:r,summary:Y+": "+e,editable:u,handleEditable:h,s:a},qe(Qt,{tableId:e,store:n,cellId:o,descending:i,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:c,editable:u}))},un=({store:e,storeId:t,s:n})=>{const s=gt("v",t),[l,r]=bt(s,n);return De(a(e))?null:qe(Vt,{uniqueId:s,summary:re,editable:l,handleEditable:r,s:n},qe(Gt,{store:e,editable:l}))},hn=({storeId:e,s:t})=>{const n=M(e),s=R(n);return be(n)?null:qe(Vt,{uniqueId:gt("s",e),summary:(n.isMergeable()?"Mergeable":"")+"Store: "+(e??K),s:t},qe(un,{storeId:e,store:n,s:t}),pt(s,(s=>qe(cn,{store:n,storeId:e,tableId:s,s:t,key:s}))))},mn=({s:e})=>{const t=Ee(null),n=Ee(0),[s,l]=ze(!1),{scrollLeft:a,scrollTop:r}=E(e);Me((()=>{const e=t.current;if(e&&!s){const t=new MutationObserver((()=>{e.scrollWidth>=ge(a)+e.clientWidth&&e.scrollHeight>=ge(r)+e.clientHeight&&e.scrollTo(a,r)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[s,a,r]);const o=Ne((t=>{const{scrollLeft:s,scrollTop:a}=t[ie];cancelIdleCallback(n.current),n.current=requestIdleCallback((()=>{l(!0),e.setPartialValues({scrollLeft:s,scrollTop:a})}))}),[e]),i=M(),d=z(),c=x(),u=$(),h=v(),m=A(),g=V(),p=J(),b=q(),f=O();return be(i)&&De(d)&&be(c)&&De(u)&&be(h)&&De(m)&&be(g)&&De(p)&&be(b)&&De(f)?qe("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):qe("article",{ref:t,onScroll:o},qe(hn,{s:e}),Pe(d,(t=>qe(hn,{storeId:t,s:e,key:t}))),qe(ln,{s:e}),Pe(u,(t=>qe(ln,{metricsId:t,s:e,key:t}))),qe(nn,{s:e}),Pe(m,(t=>qe(nn,{indexesId:t,s:e,key:t}))),qe(dn,{s:e}),Pe(p,(t=>qe(dn,{relationshipsId:t,s:e,key:t}))),qe(rn,{s:e}),Pe(f,(t=>qe(rn,{queriesId:t,s:e,key:t}))))};class gn extends xe{constructor(e){super(e),this.state={e:0}}static getDerivedStateFromError(){return{e:1}}componentDidCatch=(e,t)=>console.error(e,t.componentStack);render(){return this.state.e?qe("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const pn=({s:e})=>{const t=n(ut,e)??1,l=s(ht,(()=>!1),[],e),a=s(ut,(e=>Number(e[ie].dataset.id)),[],e);return qe("header",null,qe("img",{title:rt}),qe("span",null,rt),Pe(ot,((e,n)=>n==t?null:qe("img",{onClick:a,"data-id":n,title:"Dock to "+e,key:n}))),qe("img",{onClick:l,title:"Close"}))},bn=({s:e})=>{const t=n(ut,e)??1;return n(ht,e)?qe("main",{"data-position":t},qe(pn,{s:e}),qe(gn,null,qe(mn,{s:e}))):null},fn=e=>t=>{return n=(t,n)=>t+e(n),xn(t).reduce(n,0);var n},yn=e=>e?.size??0,In=fn(yn),wn=fn(In),vn=fn(wn),Cn=(e,t)=>e?.has(t)??!1,kn=e=>be(e)||0==yn(e),xn=e=>[...e?.values()??[]],Tn=e=>e.clear(),Sn=(e,t)=>e?.forEach(t),qn=(e,t)=>e?.delete(t),Nn=e=>new Map(e),Vn=e=>[...e?.keys()??[]],Ln=(e,t)=>e?.get(t),Mn=(e,t)=>Sn(e,((e,n)=>t(n,e))),Rn=(e,t,n)=>be(n)?(qn(e,t),e):e?.set(t,n),En=(e,t,n,s)=>(Cn(e,t)?s?.(Ln(e,t)):Rn(e,t,n()),Ln(e,t)),zn=(e,t,n,s=Rn)=>(_e(t,((t,s)=>n(e,s,t))),Mn(e,(n=>Ye(t,n)?0:s(e,n))),e),$n=(e,t,n,s)=>{const l={};return Sn(e,((e,a)=>{if(!n?.(e,a)){const n=t?t(e,a):e;s?.(n)||(l[a]=n)}})),l},An=(e,t,n)=>$n(e,(e=>$n(e,t,n)),kn,et),Jn=(e,t,n)=>$n(e,(e=>An(e,t,n)),kn,et),On=(e,t)=>{const n=Nn();return Sn(e,((e,s)=>n.set(s,t?.(e)??e))),n},Pn=e=>On(e,On),Dn=e=>On(e,Pn),Fn=(e,t,n,s,l=0)=>fe((n?En:Ln)(e,t[l],l>Ce(t)-2?n:Nn),(a=>{if(l>Ce(t)-2)return s?.(a)&&Rn(e,t[l]),a;const r=Fn(a,t,n,s,l+1);return kn(a)&&Rn(e,t[l]),r})),jn=e=>new Set(we(e)||be(e)?e:[e]),Bn=(e,t)=>e?.add(t),Hn=/^\d+$/,Wn=()=>{const e=[];let t=0;return[n=>(n?je(e):null)??j+t++,t=>{Hn.test(t)&&Ce(e)<1e3&&Fe(e,t)}]},Qn=e=>{let t;const[n,s]=Wn(),l=Nn();return[(s,a,r,o=[],i=()=>[])=>{t??=e();const d=n(1);return Rn(l,d,[s,a,r,o,i]),Bn(Fn(a,r??[j],jn),d),d},(e,n,...s)=>Oe(((e,t=[j])=>{const n=[],s=(e,l)=>l==Ce(t)?Fe(n,e):null===t[l]?Sn(e,(e=>s(e,l+1))):Oe([t[l],null],(t=>s(Ln(e,t),l+1)));return s(e,0),n})(e,n),(e=>Sn(e,(e=>Ln(l,e)[0](t,...n??[],...s))))),e=>fe(Ln(l,e),(([,t,n])=>(Fn(t,n??[j],void 0,(t=>(qn(t,e),kn(t)?1:0))),Rn(l,e),s(e),n))),e=>fe(Ln(l,e),(([e,,n=[],s,l])=>{const a=(...r)=>{const o=Ce(r);o==Ce(n)?e(t,...r,...l(r)):be(n[o])?Oe(s[o]?.(...r)??[],(e=>a(...r,e))):a(...r,n[o])};a()}))]},Gn=Nn(),Kn=Nn(),Un="storage",Xn=e=>[e,e],Yn=(e,t=In)=>t(e[0])+t(e[1]),Zn=()=>[Nn(),Nn()],_n=e=>[...e],es=([e,t])=>e===t,ts=(e,t,n)=>Rn(e,t,Ln(e,t)==-n?void 0:n),ns=()=>{let e,t,n=!1,s=!1,l=0,a=[];const r=Nn(),o=Nn(),i=Nn(),d=Nn(),c=Nn(),u=Nn(),h=Nn(),m=Nn(),g=Nn(),p=Nn(),b=Nn(),f=Nn(),y=Nn(),I=Nn(),w=jn(),v=Nn(),C=Nn(),k=Nn(),x=Nn(),T=Zn(),S=Zn(),q=Zn(),N=Zn(),V=Zn(),L=Zn(),M=Zn(),R=Zn(),E=Zn(),z=Zn(),$=Zn(),A=Zn(),J=Zn(),O=Zn(),P=Zn(),D=Zn(),F=Zn(),j=Zn(),B=Zn(),H=Zn(),Q=Zn(),X=Zn(),ie=Nn(),de=Zn(),[ue,he,me,ge]=Qn((()=>nn)),pe=e=>{if(!tt(e,((e,t)=>[G,K].includes(t))))return!1;const t=e[G];return!(!ye(t)&&t!=W||(Lt(e[K])!=t&&Ze(e,K),0))},ke=we,xe=(t,n)=>(!e||Cn(b,n)||ut(n))&&tt(t,((e,t)=>Te(n,t,e)),(()=>ut(n))),Te=(e,t,n,s)=>tt(s?n:Ve(n,e,t),((s,l)=>fe(Se(e,t,l,s),(e=>(n[l]=e,!0)),(()=>!1))),(()=>ut(e,t))),Se=(t,n,s,l)=>e?fe(Ln(Ln(b,t),s),(e=>Lt(l)!=e[G]?ut(t,n,s,l,e[K]):l),(()=>ut(t,n,s,l))):be(Lt(l))?ut(t,n,s,l):l,qe=(e,t)=>tt(t?e:Le(e),((t,n)=>fe(Ne(n,t),(t=>(e[n]=t,!0)),(()=>!1))),(()=>ht())),Ne=(e,n)=>t?fe(Ln(y,e),(t=>Lt(n)!=t[G]?ht(e,n,t[K]):n),(()=>ht(e,n))):be(Lt(n))?ht(e,n):n,Ve=(e,t,n)=>(fe(Ln(f,t),(([s,l])=>{Sn(s,((t,n)=>{Ye(e,n)||(e[n]=t)})),Sn(l,(s=>{Ye(e,s)||ut(t,n,s)}))})),e),Le=e=>(t&&(Sn(I,((t,n)=>{Ye(e,n)||(e[n]=t)})),Sn(w,(t=>{Ye(e,t)||ht(t)}))),e),Me=e=>zn(b,e,((e,t,n)=>{const s=Nn(),l=jn();zn(En(b,t,Nn),n,((e,t,n)=>{Rn(e,t,n),fe(n[K],(e=>Rn(s,t,e)),(()=>Bn(l,t)))})),Rn(f,t,[s,l])}),((e,t)=>{Rn(b,t),Rn(f,t)})),Re=e=>zn(y,e,((e,t,n)=>{Rn(y,t,n),fe(n[K],(e=>Rn(I,t,e)),(()=>Bn(w,t)))}),((e,t)=>{Rn(y,t),Rn(I,t),qn(w,t)})),Ee=e=>et(e)?Gt():jt(e),ze=e=>zn(k,e,((e,t,n)=>$e(t,n)),((e,t)=>Ge(t))),$e=(e,t)=>zn(En(k,e,(()=>(at(e,1),Rn(v,e,Wn()),Rn(C,e,Nn()),Nn()))),t,((t,n,s)=>Ae(e,t,n,s)),((t,n)=>Ke(e,t,n))),Ae=(e,t,n,s,l)=>zn(En(t,n,(()=>(rt(e,n,1),Nn()))),s,((t,s,l)=>De(e,n,t,s,l)),((s,a)=>Xe(e,t,n,s,a,l))),De=(e,t,n,s,l)=>{Cn(n,s)||ot(e,t,s,1);const a=Ln(n,s);l!==a&&(it(e,t,s,a,l),Rn(n,s,l))},je=(e,t,n,s,l)=>fe(Ln(t,n),(t=>De(e,n,t,s,l)),(()=>Ae(e,t,n,Ve({[s]:l},e,n)))),Be=e=>et(e)?Xt():Bt(e),He=e=>zn(x,e,((e,t,n)=>We(t,n)),((e,t)=>nt(t))),We=(e,t)=>{Cn(x,e)||dt(e,1);const n=Ln(x,e);t!==n&&(ct(e,n,t),Rn(x,e,t))},Qe=e=>Ln(k,e)??$e(e,{}),Ge=e=>$e(e,{}),Ke=(e,t,n)=>{const[,s]=Ln(v,e);s(n),Ae(e,t,n,{},!0)},Xe=(e,t,n,s,l,a)=>{const r=Ln(Ln(f,e)?.[0],l);if(!be(r)&&!a)return De(e,n,s,l,r);const o=t=>{it(e,n,t,Ln(s,t)),ot(e,n,t,-1),Rn(s,t)};be(r)?o(l):Mn(s,o),kn(s)&&(rt(e,n,-1),kn(Rn(t,n))&&(at(e,-1),Rn(k,e),Rn(v,e),Rn(C,e)))},nt=e=>{const t=Ln(I,e);if(!be(t))return We(e,t);ct(e,Ln(x,e)),dt(e,-1),Rn(x,e)},at=(e,t)=>ts(r,e,t),rt=(e,t,n)=>ts(En(d,e,Nn),t,n)&&Rn(i,e,En(i,e,(()=>0))+n),ot=(e,t,n,s)=>{const l=Ln(C,e),a=Ln(l,n)??0;(0==a&&1==s||1==a&&-1==s)&&ts(En(o,e,Nn),n,s),Rn(l,n,a!=-s?a+s:null),ts(En(En(c,e,Nn),t,Nn),n,s)},it=(e,t,n,s,l)=>{En(En(En(u,e,Nn),t,Nn),n,(()=>[s,0]))[1]=l,a[3]?.(e,t,n,l)},dt=(e,t)=>ts(h,e,t),ct=(e,t,n)=>{En(m,e,(()=>[t,0]))[1]=n,a[4]?.(e,n)},ut=(e,t,n,s,l)=>(Fe(En(En(En(g,e,Nn),t,Nn),n,(()=>[])),s),l),ht=(e,t,n)=>(Fe(En(p,e,(()=>[])),t),n),mt=(e,t,n)=>fe(Ln(Ln(Ln(u,e),t),n),(([e,t])=>[!0,e,t]),(()=>[!1,...Xn(Nt(e,t,n))])),gt=e=>fe(Ln(m,e),(([e,t])=>[!0,e,t]),(()=>[!1,...Xn(zt(e))])),pt=e=>kn(g)||kn(D[e])?0:Sn(e?Dn(g):g,((t,n)=>Sn(t,((t,s)=>Sn(t,((t,l)=>he(D[e],[n,s,l],t))))))),bt=e=>kn(p)||kn(F[e])?0:Sn(e?On(p):p,((t,n)=>he(F[e],[n],t))),ft=(e,t,n,s)=>{if(!kn(e))return he(t,s,(()=>$n(e))),Mn(e,((e,t)=>he(n,[...s??[],e],1==t))),1},yt=e=>{const t=$t();t!=n&&he(T[e],void 0,t);const s=kn(z[e]),l=kn(J[e])&&kn(O[e])&&kn(E[e])&&kn($[e])&&kn(L[e])&&kn(M[e])&&kn(R[e])&&s&&kn(q[e])&&kn(N[e]),a=kn(P[e])&&kn(A[e])&&kn(V[e])&&kn(S[e]);if(!l||!a){const t=e?[On(r),Pn(o),On(i),Pn(d),Dn(c),Dn(u)]:[r,o,i,d,c,u];if(!l){ft(t[0],q[e],N[e]),Sn(t[1],((t,n)=>ft(t,L[e],M[e],[n]))),Sn(t[2],((t,n)=>{0!=t&&he(R[e],[n],xt(n))}));const n=jn();Sn(t[3],((t,l)=>{ft(t,E[e],$[e],[l])&&!s&&(he(z[e],[l,null]),Bn(n,l))})),s||Sn(t[5],((t,s)=>{if(!Cn(n,s)){const n=jn();Sn(t,(e=>Sn(e,(([t,s],l)=>s!==t?Bn(n,l):qn(e,l))))),Sn(n,(t=>he(z[e],[s,t])))}})),Sn(t[4],((t,n)=>Sn(t,((t,s)=>ft(t,J[e],O[e],[n,s])))))}if(!a){let n;Sn(t[5],((t,s)=>{let l;Sn(t,((t,a)=>{let r;Sn(t,(([t,o],i)=>{o!==t&&(he(P[e],[s,a,i],o,t,mt),n=l=r=1)})),r&&he(A[e],[s,a],mt)})),l&&he(V[e],[s],mt)})),n&&he(S[e],void 0,mt)}}},It=e=>{const t=Dt();t!=s&&he(j[e],void 0,t);const n=kn(H[e])&&kn(Q[e]),l=kn(X[e])&&kn(B[e]);if(!n||!l){const t=e?[On(h),On(m)]:[h,m];if(n||ft(t[0],H[e],Q[e]),!l){let n;Sn(t[1],(([t,s],l)=>{s!==t&&(he(X[e],[l],s,t,gt),n=1)})),n&&he(B[e],void 0,gt)}}},wt=(e,...t)=>(_t((()=>e(...Pe(t,ce)))),nn),vt=()=>Jn(k),Ct=()=>Vn(k),kt=e=>Vn(Ln(C,ce(e))),xt=e=>yn(Ln(k,ce(e))),Tt=e=>Vn(Ln(k,ce(e))),St=(e,t,n,s=0,l)=>{return Pe(ve(Je((a=Ln(k,ce(e)),r=(e,n)=>[be(t)?n:Ln(e,ce(t)),n],Pe([...a?.entries()??[]],(([e,t])=>r(t,e)))),(([e],[t])=>((e??0)<(t??0)?-1:1)*(n?-1:1))),s,be(l)?l:s+l),(([,e])=>e));var a,r},qt=(e,t)=>Vn(Ln(Ln(k,ce(e)),ce(t))),Nt=(e,t,n)=>Ln(Ln(Ln(k,ce(e)),ce(t)),ce(n)),Vt=()=>$n(x),Et=()=>Vn(x),zt=e=>Ln(x,ce(e)),$t=()=>!kn(k),At=e=>Cn(k,ce(e)),Jt=(e,t)=>Cn(Ln(C,ce(e)),ce(t)),Ot=(e,t)=>Cn(Ln(k,ce(e)),ce(t)),Pt=(e,t,n)=>Cn(Ln(Ln(k,ce(e)),ce(t)),ce(n)),Dt=()=>!kn(x),Ft=e=>Cn(x,ce(e)),jt=e=>wt((()=>(e=>tt(e,xe,ut))(e)?ze(e):0)),Bt=e=>wt((()=>qe(e)?He(e):0)),Ht=e=>{try{Ee(st(e))}catch{}return nn},Wt=t=>wt((()=>{if((e=tt(t,(e=>tt(e,pe))))&&(Me(t),!kn(k))){const e=vt();Gt(),jt(e)}})),Qt=e=>wt((()=>{if(t=(e=>tt(e,pe))(e)){const n=Vt();Zt(),Xt(),t=!0,Re(e),Bt(n)}})),Gt=()=>wt((()=>ze({}))),Kt=e=>wt((e=>Cn(k,e)?Ge(e):0),e),Ut=(e,t)=>wt(((e,t)=>fe(Ln(k,e),(n=>Cn(n,t)?Ke(e,n,t):0))),e,t),Xt=()=>wt((()=>He({}))),Yt=()=>wt((()=>{Me({}),e=!1})),Zt=()=>wt((()=>{Re({}),t=!1})),_t=(e,t)=>{if(-1!=l){en();const n=e();return tn(t),n}},en=()=>(-1!=l&&l++,1==l&&(a[0]?.(),he(ie)),nn),tn=e=>(l>0&&(l--,0==l&&(l=1,pt(1),kn(u)||yt(1),bt(1),kn(m)||It(1),e?.(nn)&&(Sn(u,((e,t)=>Sn(e,((e,n)=>Sn(e,(([e],s)=>Mt(nn,t,n,s,e))))))),Tn(u),Sn(m,(([e],t)=>Rt(nn,t,e))),Tn(m)),he(de[0],void 0),l=-1,pt(0),kn(u)||yt(0),bt(0),kn(m)||It(0),a[1]?.(),he(de[1],void 0),a[2]?.(),l=0,n=$t(),s=Dt(),Oe([r,o,i,d,c,u,g,h,m,p],Tn))),nn),nn={getContent:()=>[vt(),Vt()],getTables:vt,getTableIds:Ct,getTable:e=>An(Ln(k,ce(e))),getTableCellIds:kt,getRowCount:xt,getRowIds:Tt,getSortedRowIds:St,getRow:(e,t)=>$n(Ln(Ln(k,ce(e)),ce(t))),getCellIds:qt,getCell:Nt,getValues:Vt,getValueIds:Et,getValue:zt,hasTables:$t,hasTable:At,hasTableCell:Jt,hasRow:Ot,hasCell:Pt,hasValues:Dt,hasValue:Ft,getTablesJson:()=>lt(k),getValuesJson:()=>lt(x),getJson:()=>lt([k,x]),getTablesSchemaJson:()=>lt(b),getValuesSchemaJson:()=>lt(y),getSchemaJson:()=>lt([b,y]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>wt((()=>{const t=Ie(e)?e():e;ke(t)&&(([e,t])=>{(et(e)?Gt:jt)(e),(et(t)?Xt:Bt)(t)})(t)})),setTables:jt,setTable:(e,t)=>wt((e=>xe(t,e)?$e(e,t):0),e),setRow:(e,t,n)=>wt(((e,t)=>Te(e,t,n)?Ae(e,Qe(e),t,n):0),e,t),addRow:(e,t,n=!0)=>_t((()=>{let s;return Te(e,s,t)&&(e=ce(e),Ae(e,Qe(e),s=((e,t)=>{const[n]=Ln(v,e);let s;do{s=n(t)}while(Cn(Ln(k,e),s));return s})(e,n?1:0),t)),s})),setPartialRow:(e,t,n)=>wt(((e,t)=>{if(Te(e,t,n,1)){const s=Qe(e);_e(n,((n,l)=>je(e,s,t,l,n)))}}),e,t),setCell:(e,t,n,s)=>wt(((e,t,n)=>fe(Se(e,t,n,Ie(s)?s(Nt(e,t,n)):s),(s=>je(e,Qe(e),t,n,s)))),e,t,n),setValues:Bt,setPartialValues:e=>wt((()=>qe(e,1)?_e(e,((e,t)=>We(t,e))):0)),setValue:(e,t)=>wt((e=>fe(Ne(e,Ie(t)?t(zt(e)):t),(t=>We(e,t)))),e),applyChanges:e=>wt((()=>{_e(e[0],((e,t)=>be(e)?Kt(t):_e(e,((e,n)=>be(e)?Ut(t,n):_e(e,((e,s)=>Mt(nn,t,n,s,e))))))),_e(e[1],((e,t)=>Rt(nn,t,e)))})),setTablesJson:Ht,setValuesJson:e=>{try{Be(st(e))}catch{}return nn},setJson:e=>wt((()=>{try{const[t,n]=st(e);Ee(t),Be(n)}catch{Ht(e)}})),setTablesSchema:Wt,setValuesSchema:Qt,setSchema:(e,t)=>wt((()=>{Wt(e),Qt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,n,s)=>wt(((e,t,n)=>fe(Ln(k,e),(l=>fe(Ln(l,t),(a=>Cn(a,n)?Xe(e,l,t,a,n,s):0))))),e,t,n),delValues:Xt,delValue:e=>wt((e=>Cn(x,e)?nt(e):0),e),delTablesSchema:Yt,delValuesSchema:Zt,delSchema:()=>wt((()=>{Yt(),Zt()})),transaction:_t,startTransaction:en,getTransactionChanges:()=>[$n(u,((e,t)=>-1===Ln(r,t)?void 0:$n(e,((e,n)=>-1===Ln(Ln(d,t),n)?void 0:$n(e,(([,e])=>e),(e=>es(e)))),kn,et)),kn,et),$n(m,(([,e])=>e),(e=>es(e))),1],getTransactionLog:()=>[!kn(u),!kn(m),Jn(u,_n,es),Jn(g),$n(m,_n,es),$n(p),$n(r),An(d),Jn(c),$n(h)],finishTransaction:tn,forEachTable:e=>Sn(k,((t,n)=>e(n,(e=>Sn(t,((t,n)=>e(n,(e=>Mn(t,e))))))))),forEachTableCell:(e,t)=>Mn(Ln(C,ce(e)),t),forEachRow:(e,t)=>Sn(Ln(k,ce(e)),((e,n)=>t(n,(t=>Mn(e,t))))),forEachCell:(e,t,n)=>Mn(Ln(Ln(k,ce(e)),ce(t)),n),forEachValue:e=>Mn(x,e),addSortedRowIdsListener:(e,t,n,s,l,a,r)=>{let o=St(e,t,n,s,l);return ue((()=>{const r=St(e,t,n,s,l);var i,d,c;d=o,Ce(i=r)===Ce(d)&&(c=(e,t)=>d[t]===e,i.every(c))||(o=r,a(nn,e,t,n,s,l,o))}),z[r?1:0],[e,t],[Ct])},addStartTransactionListener:e=>ue(e,ie),addWillFinishTransactionListener:e=>ue(e,de[0]),addDidFinishTransactionListener:e=>ue(e,de[1]),callListener:e=>(ge(e),nn),delListener:e=>(me(e),nn),getListenerStats:()=>({hasTables:Yn(T),tables:Yn(S),tableIds:Yn(q),hasTable:Yn(N),table:Yn(V),tableCellIds:Yn(L),hasTableCell:Yn(M,wn),rowCount:Yn(R),rowIds:Yn(E),sortedRowIds:Yn(z),hasRow:Yn($,wn),row:Yn(A,wn),cellIds:Yn(J,wn),hasCell:Yn(O,vn),cell:Yn(P,vn),invalidCell:Yn(D,vn),hasValues:Yn(j),values:Yn(B),valueIds:Yn(H),hasValue:Yn(Q),value:Yn(X),invalidValue:Yn(F),transaction:In(ie)+Yn(de)}),isMergeable:()=>!1,createStore:ns,addListener:ue,callListeners:he,setInternalListeners:(e,t,n,s,l)=>a=[e,t,n,s,l]};return _e({[U+Z]:[0,T,[],()=>[$t()]],[Z]:[0,S],[_]:[0,q],[U+Y]:[1,N,[Ct],e=>[At(...e)]],[Y]:[1,V,[Ct]],[Y+le]:[1,L,[Ct]],[U+Y+se]:[2,M,[Ct,kt],e=>[Jt(...e)]],[te]:[1,R,[Ct]],[ne]:[1,E,[Ct]],[U+ee]:[2,$,[Ct,Tt],e=>[Ot(...e)]],[ee]:[2,A,[Ct,Tt]],[le]:[2,J,[Ct,Tt]],[U+se]:[3,O,[Ct,Tt,qt],e=>[Pt(...e)]],[se]:[3,P,[Ct,Tt,qt],e=>Xn(Nt(...e))],InvalidCell:[3,D],[U+re]:[0,j,[],()=>[Dt()]],[re]:[0,B],[oe]:[0,H],[U+ae]:[1,Q,[Et],e=>[Ft(...e)]],[ae]:[1,X,[Et],e=>Xn(zt(e[0]))],InvalidValue:[1,F]},(([e,t,n,s],l)=>{nn["add"+l+"Listener"]=(...l)=>ue(l[e],t[l[e+1]?1:0],e>0?ve(l,0,e):void 0,n,s)})),Ue(nn)},ss=({position:e="right",open:t=!1})=>{const n=P(ns),s=ot.indexOf(e);return D(n,(e=>{return t=at,n=sessionStorage,((e,t,n,s,l,a,r,o={},i=0,d=[])=>{let c,u,h,m=0,g=0,p=0;En(Gn,d,(()=>0)),En(Kn,d,(()=>[]));const b=Nn(),[f,y,I,w,v]=((e=1,t,n)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!n),([[e],[t]])=>!et(e)||!et(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!et(e)||!et(t),t.setContent]:ke("Store type not supported by this Persister"))(r,e,i),[C,k,x]=Qn((()=>R)),T=e=>{e!=m&&(m=e,k(b,void 0,m))},S=t=>{(f&&we(t?.[0])?1===t?.[2]?e.applyMergeableChanges:e.setMergeableContent:1===t?.[2]?e.applyChanges:e.setContent)(t)},q=async e=>(2!=m&&(T(1),g++,await M((async()=>{try{const n=await t();we(n)?S(n):e?v(e):ke("Content is not an array: "+n)}catch(t){e&&v(e)}T(0)}))),R),N=()=>(u&&(l(u),u=void 0),R),V=async e=>(1!=m&&(T(2),p++,await M((async()=>{try{await n(y,e)}catch(e){}T(0)}))),R),L=()=>(h&&(e.delListener(h),h=void 0),R),M=async(...e)=>(Fe(Ln(Kn,d),...e),await(async()=>{if(!Ln(Gn,d)){for(Rn(Gn,d,1);!be(c=je(Ln(Kn,d)));)try{await c()}catch(e){}Rn(Gn,d,0)}})(),R),R={load:q,startAutoLoad:async e=>{N(),await q(e);try{u=await s((async(e,t)=>{t||e?2!=m&&(T(1),g++,S(t??e),T(0)):await q()}))}catch(e){}return R},stopAutoLoad:N,isAutoLoading:()=>!be(u),save:V,startAutoSave:async()=>(L(),await V(),h=e.addDidFinishTransactionListener((()=>{const e=I();w(e)&&V(e)})),R),stopAutoSave:L,isAutoSaving:()=>!be(h),getStatus:()=>m,addStatusListener:e=>C(e,b),delListener:t=>(x(t),e),schedule:M,getStore:()=>e,destroy:()=>(Ln(Kn,d).splice(0,void 0),N().stopAutoSave()),getStats:()=>({loads:g,saves:p}),...o};return Ue(R)})(e,(async()=>{return e=n.getItem(t),st(e,((e,t)=>"￼"===t?void 0:t));var e}),(async e=>{return n.setItem(t,(s=e(),nt(s,((e,t)=>void 0===t?"￼":t))));var s}),(e=>{const s=s=>{if(s.storageArea===n&&s.key===t)try{e(st(s.newValue))}catch{e()}};return ue.addEventListener(Un,s),s}),(e=>ue.removeEventListener(Un,e)),0,3,{getStorageName:()=>t});var t,n}),void 0,(async e=>{await e.load([{},{position:-1==s?1:s,open:!!t}]),await e.startAutoSave()})),qe(Te,null,qe("aside",{id:at},qe(Nt,{s:n}),qe(bn,{s:n})),qe("style",null,qt))};export{ss as Inspector};
