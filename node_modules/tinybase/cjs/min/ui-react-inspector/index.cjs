"use strict";var e=require("react"),t=require("../ui-react/index.cjs");const s=e=>typeof e,l="",n=s(l),a=s(!0),r=s(0),o=s(s),i="type",d="default",u="Has",c="Ids",h="Table",m=h+"s",g=h+c,b="Row",p=b+"Count",I=b+c,f="Cell",y=f+c,w="Value",C=w+"s",v=w+c,k="currentTarget",S="value",x=e=>l+e,T=globalThis.window,V=Math,R=V.min,q=V.floor,M=isFinite,N=e=>null==e,L=(e,t,s)=>N(e)?s?.():t(e),E=e=>e==n||e==a,z=e=>s(e)==o,$=e=>Array.isArray(e),O=(e,t,s)=>e.slice(t,s),A=e=>e.length,J=e=>{throw Error(e)},{PureComponent:P,Fragment:B,createContext:D,createElement:F,useCallback:Q,useContext:j,useEffect:H,useLayoutEffect:W,useMemo:G,useRef:K,useState:U,useSyncExternalStore:X}=e,Y=(e,...t)=>N(e)?{}:e(...t),Z=(e,t)=>e.sort(t),_=(e,t)=>e.forEach(t),ee=(e,t)=>e.map(t),te=e=>0==A(e),se=(e,...t)=>e.push(...t),le=e=>e.shift(),ne=Object,ae=e=>ne.getPrototypeOf(e),re=ne.entries,oe=ne.isFrozen,ie=e=>!N(e)&&L(ae(e),(e=>e==ne.prototype||N(ae(e))),(()=>!0)),de=ne.keys,ue=ne.freeze,ce=(e=[])=>ne.fromEntries(e),he=(e,t)=>t in e,me=(e,t)=>(delete e[t],e),ge=(e,t)=>ee(re(e),(([e,s])=>t(s,e))),be=e=>ie(e)&&0==(e=>A(de(e)))(e),pe=(e,t,s,l=0)=>N(e)||!ie(e)||!l&&be(e)||oe(e)?(s?.(),!1):(ge(e,((s,l)=>{t(s,l)||me(e,l)})),!!l||!be(e)),Ie=JSON.stringify,fe=JSON.parse,ye=e=>Ie(e,((e,t)=>t instanceof Map?ne.fromEntries([...t]):t)),we="tinybaseInspector",Ce="TinyBase Inspector",ve=["left","top","bottom","right","full"],ke="state",Se="sort",xe="open",Te="position",Ve=xe,Re="editable",qe=(...e)=>ye(e),Me=(e,t)=>ee(Z([...e]),t),Ne=(e,s)=>[!!t.useCell(ke,e,Re,s),Q((t=>{s.setCell(ke,e,Re,(e=>!e)),t.preventDefault()}),[s,e])],Le="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",Ee='content:url("',ze=Ee+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",$e='</svg>")',Oe=Ee+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",Ae=ee([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,s,l])=>ze+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${s}' height='${l}' fill='white'/>`+$e)),Je=ze+"<path d='M20 20l60 60M20 80l60-60' />"+$e,Pe=ze+`<path d='${Le}' />`+$e,Be=ze+`<path d='${Le}M20 20l60 60' />`+$e,De="*::-webkit-scrollbar",Fe=((e,t="")=>e.join(t))(ge({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[De]:"width:0.5rem;height:0.5rem;",[De+"-track"]:"background:#111",[De+"-thumb"]:"background:#999;border:1px solid #111",[De+"-thumb:hover"]:"background:#fff",[De+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+Oe,...ce(ee(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e]))),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...ce(ee(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e]))),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":Oe,"header>img:nth-of-type(6)":Je,...ce(ee(Ae,((e,t)=>[`header>img[data-id='${t}']`,e]))),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":Pe,"details[open]>summary img.done":Be,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${we} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},((e,t)=>e?`#${we} ${t}{${e}}`:""))),Qe=({s:e})=>{const s=t.useValue(Te,e)??1,l=t.useSetValueCallback(Ve,(()=>!0),[],e);return t.useValue(Ve,e)?null:F("img",{onClick:l,title:Ce,"data-position":s})},je=({uniqueId:e,summary:s,editable:l,handleEditable:n,children:a,s:r})=>{const o=!!t.useCell(ke,e,xe,r),i=t.useSetCellCallback(ke,e,xe,(e=>e[k].open),[],r);return F("details",{open:o,onToggle:i},F("summary",null,s,n?F("img",{onClick:n,className:l?"done":"edit"}):null),a)},He=e=>{const t=s(e);return E(t)||t==r&&M(e)?t:void 0},We=(e,t,s,l,n)=>N(n)?e.delCell(t,s,l,!0):e.setCell(t,s,l,n),Ge=(e,t,s)=>N(s)?e.delValue(t):e.setValue(t,s),Ke=(e,t,s,l)=>e==n?t:e==r?s:l,Ue="editable",Xe=(e,s)=>ee(t.useTableCellIds(e,s),(t=>e+"."+t)),Ye=(e,t,s)=>{const l=Q(e,t);return s?l:void 0},Ze=(...e)=>G((()=>e),e),_e=(e,t)=>G((()=>({store:e,tableId:t})),[e,t]),et=(e,t)=>G((()=>({queries:e,queryId:t})),[e,t]),tt=(e,t=!1,s,l=0,n,a,r,o)=>{const[[i,d,u],c]=U([e,t,l]),h=Q((e=>{c(e),o?.(e)}),[o]),m=Ye((e=>h([e,e==i&&!d,u])),[h,i,d,u],s),g=Q((e=>h([i,d,e])),[h,i,d]),b=!0===r?gt:r;return[[i,d,u],m,G((()=>!1===r?null:F(b,{offset:u,limit:n,total:a,onChange:g})),[r,b,u,n,a,g])]},st=(e,t,l)=>G((()=>{const a=t??e;return r=$(a)?ce(ee(a,(e=>[e,e]))):a,o=(e,t)=>{return{label:t,component:l,...(a=e,s(a)==n?{label:e}:e)};var a},ce(ge(r,((e,t)=>[t,o(e,t)])));var r,o}),[t,l,e]),lt=({className:e,headerRow:t,idColumn:s,params:[l,n,a,r,o,i]})=>F("table",{className:e},i?F("caption",null,i):null,!1===t?null:F("thead",null,F("tr",null,!1===s?null:F(nt,{sort:r??[],label:"Id",onClick:o}),ge(l,(({label:e},t)=>F(nt,{key:t,cellId:t,label:e,sort:r??[],onClick:o}))))),F("tbody",null,ee(a,(e=>F("tr",{key:e},!1===s?null:F("th",null,e),ge(l,(({component:t,getComponentProps:s},l)=>F("td",{key:l},F(t,{...Y(s,e,l),...n,rowId:e,cellId:l}))))))))),nt=({cellId:e,sort:[t,s],label:n=e??l,onClick:a})=>F("th",{onClick:Ye((()=>a?.(e)),[a,e],a),className:N(s)||t!=e?void 0:`sorted ${s?"de":"a"}scending`},N(s)||t!=e?null:(s?"↓":"↑")+" ",n),at=({localRowId:e,params:[s,l,n,a,r,o,i]})=>{const d=t.useRemoteRowId(r,e,o);return F("tr",null,!1===s?null:F(B,null,F("th",null,e),F("th",null,d)),ge(l,(({component:t,getComponentProps:s},l)=>{const[r,o]=((e,t="",s)=>e.split(t,s))(l,".",2),u=r===n?e:r===a?d:null;return N(u)?null:F("td",{key:l},F(t,{...Y(s,u,o),store:i,tableId:r,rowId:u,cellId:o}))})))},rt=({thing:e,onThingChange:t,className:s,hasSchema:l,showType:o=!0})=>{const[i,d]=U(),[u,c]=U(),[h,m]=U(),[g,b]=U(),[p,I]=U();u!==e&&(d(He(e)),c(e),m(e+""),b(Number(e)||0),I(!!e));const f=Q(((e,s)=>{s(e),c(e),t(e)}),[t]),y=Q((()=>{if(!l?.()){const e=Ke(i,r,a,n),s=Ke(e,h,g,p);d(e),c(s),t(s)}}),[l,t,h,g,p,i]);return F("div",{className:s},o?F("button",{className:i,onClick:y},i):null,Ke(i,F("input",{key:i,value:h,onChange:Q((e=>f(e[k][S]+"",m)),[f])}),F("input",{key:i,type:"number",value:g,onChange:Q((e=>f(Number(e[k][S]||0),b)),[f])}),F("input",{key:i,type:"checkbox",checked:p,onChange:Q((e=>f(!!e[k].checked,I)),[f])})))},ot=({tableId:e,cellId:s,descending:l,offset:n,limit:a,store:r,editable:o,sortOnClick:i,paginator:d=!1,onChange:u,customCells:c,...h})=>{const[m,g,b]=tt(s,l,i,n,a,t.useRowCount(e,r),d,u);return F(lt,{...h,params:Ze(st(t.useTableCellIds(e,r),c,o?ht:t.CellView),_e(r,e),t.useSortedRowIds(e,...m,a,r),m,g,b)})},it=({store:e,editable:s=!1,valueComponent:l=(s?mt:t.ValueView),getValueComponentProps:n,className:a,headerRow:r,idColumn:o})=>F("table",{className:a},!1===r?null:F("thead",null,F("tr",null,!1===o?null:F("th",null,"Id"),F("th",null,w))),F("tbody",null,ee(t.useValueIds(e),(t=>F("tr",{key:t},!1===o?null:F("th",null,t),F("td",null,F(l,{...Y(n,t),valueId:t,store:e}))))))),dt=({indexId:e,sliceId:s,indexes:l,editable:n,customCells:a,...r})=>{const[o,i,d]=((e,t)=>[e,e?.getStore(),e?.getTableId(t)])(t.useIndexesOrIndexesById(l),e);return F(lt,{...r,params:Ze(st(t.useTableCellIds(d,i),a,n?ht:t.CellView),_e(i,d),t.useSliceRowIds(e,s,o))})},ut=({relationshipId:e,relationships:s,editable:l,customCells:n,className:a,headerRow:r,idColumn:o=!0})=>{const[i,d,u,c]=((e,t)=>[e,e?.getStore(),e?.getLocalTableId(t),e?.getRemoteTableId(t)])(t.useRelationshipsOrRelationshipsById(s),e),h=st([...Xe(u,d),...Xe(c,d)],n,l?ht:t.CellView),m=Ze(o,h,u,c,e,i,d);return F("table",{className:a},!1===r?null:F("thead",null,F("tr",null,!1===o?null:F(B,null,F("th",null,u,".Id"),F("th",null,c,".Id")),ge(h,(({label:e},t)=>F("th",{key:t},e))))),F("tbody",null,ee(t.useRowIds(u,d),(e=>F(at,{key:e,localRowId:e,params:m})))))},ct=({queryId:e,cellId:s,descending:l,offset:n,limit:a,queries:r,sortOnClick:o,paginator:i=!1,customCells:d,onChange:u,...c})=>{const[h,m,g]=tt(s,l,o,n,a,t.useResultRowCount(e,r),i,u);return F(lt,{...c,params:Ze(st(t.useResultTableCellIds(e,r),d,t.ResultCellView),et(r,e),t.useResultSortedRowIds(e,...h,a,r),h,m,g)})},ht=({tableId:e,rowId:s,cellId:l,store:n,className:a,showType:r})=>F(rt,{thing:t.useCell(e,s,l,n),onThingChange:t.useSetCellCallback(e,s,l,(e=>e),[],n),className:a??Ue+f,showType:r,hasSchema:t.useStoreOrStoreById(n)?.hasTablesSchema}),mt=({valueId:e,store:s,className:l,showType:n})=>F(rt,{thing:t.useValue(e,s),onThingChange:t.useSetValueCallback(e,(e=>e),[],s),className:l??Ue+w,showType:n,hasSchema:t.useStoreOrStoreById(s)?.hasValuesSchema}),gt=({onChange:e,total:t,offset:s=0,limit:l=t,singular:n="row",plural:a=n+"s"})=>{(s>t||s<0)&&(s=0,e(0));const r=Ye((()=>e(s-l)),[e,s,l],s>0),o=Ye((()=>e(s+l)),[e,s,l],s+l<t);return F(B,null,t>l&&F(B,null,F("button",{className:"previous",disabled:0==s,onClick:r},"←"),F("button",{className:"next",disabled:s+l>=t,onClick:o},"→"),s+1," to ",R(t,s+l)," of "),t," ",1!=t?a:n)},bt=({indexes:e,indexesId:s,indexId:l,s:n})=>F(je,{uniqueId:qe("i",s,l),summary:"Index: "+l,s:n},ee(t.useSliceIds(l,e),(t=>F(pt,{indexes:e,indexesId:s,indexId:l,sliceId:t,s:n,key:t})))),pt=({indexes:e,indexesId:t,indexId:s,sliceId:l,s:n})=>{const a=qe("i",t,s,l),[r,o]=Ne(a,n);return F(je,{uniqueId:a,summary:"Slice: "+l,editable:r,handleEditable:o,s:n},F(dt,{sliceId:l,indexId:s,indexes:e,editable:r}))},It=({indexesId:e,s:s})=>{const l=t.useIndexes(e),n=t.useIndexIds(l);return N(l)?null:F(je,{uniqueId:qe("i",e),summary:"Indexes: "+(e??d),s:s},te(n)?"No indexes defined":Me(n,(t=>F(bt,{indexes:l,indexesId:e,indexId:t,s:s,key:t}))))},ft=({metrics:e,metricId:s})=>F("tr",null,F("th",null,s),F("td",null,e?.getTableId(s)),F("td",null,t.useMetric(s,e))),yt=({metricsId:e,s:s})=>{const l=t.useMetrics(e),n=t.useMetricIds(l);return N(l)?null:F(je,{uniqueId:qe("m",e),summary:"Metrics: "+(e??d),s:s},te(n)?"No metrics defined":F("table",null,F("thead",null,F("th",null,"Metric Id"),F("th",null,"Table Id"),F("th",null,"Metric")),F("tbody",null,ee(n,(e=>F(ft,{metrics:l,metricId:e,key:e}))))))},wt=({queries:e,queriesId:s,queryId:l,s:n})=>{const a=qe("q",s,l),[r,o,i]=fe(t.useCell(ke,a,Se,n)??"[]"),d=t.useSetCellCallback(ke,a,Se,ye,[],n);return F(je,{uniqueId:a,summary:"Query: "+l,s:n},F(ct,{queryId:l,queries:e,cellId:r,descending:o,offset:i,limit:10,paginator:!0,sortOnClick:!0,onChange:d}))},Ct=({queriesId:e,s:s})=>{const l=t.useQueries(e),n=t.useQueryIds(l);return N(l)?null:F(je,{uniqueId:qe("q",e),summary:"Queries: "+(e??d),s:s},te(n)?"No queries defined":Me(n,(t=>F(wt,{queries:l,queriesId:e,queryId:t,s:s,key:t}))))},vt=({relationships:e,relationshipsId:t,relationshipId:s,s:l})=>{const n=qe("r",t,s),[a,r]=Ne(n,l);return F(je,{uniqueId:n,summary:"Relationship: "+s,editable:a,handleEditable:r,s:l},F(ut,{relationshipId:s,relationships:e,editable:a}))},kt=({relationshipsId:e,s:s})=>{const l=t.useRelationships(e),n=t.useRelationshipIds(l);return N(l)?null:F(je,{uniqueId:qe("r",e),summary:"Relationships: "+(e??d),s:s},te(n)?"No relationships defined":Me(n,(t=>F(vt,{relationships:l,relationshipsId:e,relationshipId:t,s:s,key:t}))))},St=({tableId:e,store:s,storeId:l,s:n})=>{const a=qe("t",l,e),[r,o,i]=fe(t.useCell(ke,a,Se,n)??"[]"),d=t.useSetCellCallback(ke,a,Se,ye,[],n),[u,c]=Ne(a,n);return F(je,{uniqueId:a,summary:h+": "+e,editable:u,handleEditable:c,s:n},F(ot,{tableId:e,store:s,cellId:r,descending:o,offset:i,limit:10,paginator:!0,sortOnClick:!0,onChange:d,editable:u}))},xt=({store:e,storeId:s,s:l})=>{const n=qe("v",s),[a,r]=Ne(n,l);return te(t.useValueIds(e))?null:F(je,{uniqueId:n,summary:C,editable:a,handleEditable:r,s:l},F(it,{store:e,editable:a}))},Tt=({storeId:e,s:s})=>{const l=t.useStore(e),n=t.useTableIds(l);return N(l)?null:F(je,{uniqueId:qe("s",e),summary:(l.isMergeable()?"Mergeable":"")+"Store: "+(e??d),s:s},F(xt,{storeId:e,store:l,s:s}),Me(n,(t=>F(St,{store:l,storeId:e,tableId:t,s:s,key:t}))))},Vt=({s:e})=>{const s=K(null),l=K(0),[n,a]=U(!1),{scrollLeft:r,scrollTop:o}=t.useValues(e);W((()=>{const e=s.current;if(e&&!n){const t=new MutationObserver((()=>{e.scrollWidth>=q(r)+e.clientWidth&&e.scrollHeight>=q(o)+e.clientHeight&&e.scrollTo(r,o)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[n,r,o]);const i=Q((t=>{const{scrollLeft:s,scrollTop:n}=t[k];cancelIdleCallback(l.current),l.current=requestIdleCallback((()=>{a(!0),e.setPartialValues({scrollLeft:s,scrollTop:n})}))}),[e]),d=t.useStore(),u=t.useStoreIds(),c=t.useMetrics(),h=t.useMetricsIds(),m=t.useIndexes(),g=t.useIndexesIds(),b=t.useRelationships(),p=t.useRelationshipsIds(),I=t.useQueries(),f=t.useQueriesIds();return N(d)&&te(u)&&N(c)&&te(h)&&N(m)&&te(g)&&N(b)&&te(p)&&N(I)&&te(f)?F("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):F("article",{ref:s,onScroll:i},F(Tt,{s:e}),ee(u,(t=>F(Tt,{storeId:t,s:e,key:t}))),F(yt,{s:e}),ee(h,(t=>F(yt,{metricsId:t,s:e,key:t}))),F(It,{s:e}),ee(g,(t=>F(It,{indexesId:t,s:e,key:t}))),F(kt,{s:e}),ee(p,(t=>F(kt,{relationshipsId:t,s:e,key:t}))),F(Ct,{s:e}),ee(f,(t=>F(Ct,{queriesId:t,s:e,key:t}))))};class Rt extends P{constructor(e){super(e),this.state={e:0}}static getDerivedStateFromError(){return{e:1}}componentDidCatch=(e,t)=>console.error(e,t.componentStack);render(){return this.state.e?F("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const qt=({s:e})=>{const s=t.useValue(Te,e)??1,l=t.useSetValueCallback(Ve,(()=>!1),[],e),n=t.useSetValueCallback(Te,(e=>Number(e[k].dataset.id)),[],e);return F("header",null,F("img",{title:Ce}),F("span",null,Ce),ee(ve,((e,t)=>t==s?null:F("img",{onClick:n,"data-id":t,title:"Dock to "+e,key:t}))),F("img",{onClick:l,title:"Close"}))},Mt=({s:e})=>{const s=t.useValue(Te,e)??1;return t.useValue(Ve,e)?F("main",{"data-position":s},F(qt,{s:e}),F(Rt,null,F(Vt,{s:e}))):null},Nt=e=>t=>{return s=(t,s)=>t+e(s),Jt(t).reduce(s,0);var s},Lt=e=>e?.size??0,Et=Nt(Lt),zt=Nt(Et),$t=Nt(zt),Ot=(e,t)=>e?.has(t)??!1,At=e=>N(e)||0==Lt(e),Jt=e=>[...e?.values()??[]],Pt=e=>e.clear(),Bt=(e,t)=>e?.forEach(t),Dt=(e,t)=>e?.delete(t),Ft=e=>new Map(e),Qt=e=>[...e?.keys()??[]],jt=(e,t)=>e?.get(t),Ht=(e,t)=>Bt(e,((e,s)=>t(s,e))),Wt=(e,t,s)=>N(s)?(Dt(e,t),e):e?.set(t,s),Gt=(e,t,s,l)=>(Ot(e,t)?l?.(jt(e,t)):Wt(e,t,s()),jt(e,t)),Kt=(e,t,s,l=Wt)=>(ge(t,((t,l)=>s(e,l,t))),Ht(e,(s=>he(t,s)?0:l(e,s))),e),Ut=(e,t,s,l)=>{const n={};return Bt(e,((e,a)=>{if(!s?.(e,a)){const s=t?t(e,a):e;l?.(s)||(n[a]=s)}})),n},Xt=(e,t,s)=>Ut(e,(e=>Ut(e,t,s)),At,be),Yt=(e,t,s)=>Ut(e,(e=>Xt(e,t,s)),At,be),Zt=(e,t)=>{const s=Ft();return Bt(e,((e,l)=>s.set(l,t?.(e)??e))),s},_t=e=>Zt(e,Zt),es=e=>Zt(e,_t),ts=(e,t,s,l,n=0)=>L((s?Gt:jt)(e,t[n],n>A(t)-2?s:Ft),(a=>{if(n>A(t)-2)return l?.(a)&&Wt(e,t[n]),a;const r=ts(a,t,s,l,n+1);return At(a)&&Wt(e,t[n]),r})),ss=e=>new Set($(e)||N(e)?e:[e]),ls=(e,t)=>e?.add(t),ns=/^\d+$/,as=()=>{const e=[];let t=0;return[s=>(s?le(e):null)??l+t++,t=>{ns.test(t)&&A(e)<1e3&&se(e,t)}]},rs=e=>{let t;const[s,n]=as(),a=Ft();return[(n,r,o,i=[],d=()=>[])=>{t??=e();const u=s(1);return Wt(a,u,[n,r,o,i,d]),ls(ts(r,o??[l],ss),u),u},(e,s,...n)=>_(((e,t=[l])=>{const s=[],n=(e,l)=>l==A(t)?se(s,e):null===t[l]?Bt(e,(e=>n(e,l+1))):_([t[l],null],(t=>n(jt(e,t),l+1)));return n(e,0),s})(e,s),(e=>Bt(e,(e=>jt(a,e)[0](t,...s??[],...n))))),e=>L(jt(a,e),(([,t,s])=>(ts(t,s??[l],void 0,(t=>(Dt(t,e),At(t)?1:0))),Wt(a,e),n(e),s))),e=>L(jt(a,e),(([e,,s=[],l,n])=>{const a=(...r)=>{const o=A(r);o==A(s)?e(t,...r,...n(r)):N(s[o])?_(l[o]?.(...r)??[],(e=>a(...r,e))):a(...r,s[o])};a()}))]},os=Ft(),is=Ft(),ds="storage",us=e=>[e,e],cs=(e,t=Et)=>t(e[0])+t(e[1]),hs=()=>[Ft(),Ft()],ms=e=>[...e],gs=([e,t])=>e===t,bs=(e,t,s)=>Wt(e,t,jt(e,t)==-s?void 0:s),ps=()=>{let e,t,s=!1,l=!1,n=0,a=[];const o=Ft(),c=Ft(),k=Ft(),S=Ft(),T=Ft(),V=Ft(),R=Ft(),q=Ft(),M=Ft(),J=Ft(),P=Ft(),B=Ft(),D=Ft(),F=Ft(),Q=ss(),j=Ft(),H=Ft(),W=Ft(),G=Ft(),K=hs(),U=hs(),X=hs(),Y=hs(),te=hs(),le=hs(),ne=hs(),ae=hs(),re=hs(),oe=hs(),ie=hs(),de=hs(),ce=hs(),Ie=hs(),we=hs(),Ce=hs(),ve=hs(),ke=hs(),Se=hs(),xe=hs(),Te=hs(),Ve=hs(),Re=Ft(),qe=hs(),[Me,Ne,Le,Ee]=rs((()=>$s)),ze=e=>{if(!pe(e,((e,t)=>[i,d].includes(t))))return!1;const t=e[i];return!(!E(t)&&t!=r||(He(e[d])!=t&&me(e,d),0))},$e=$,Oe=(t,s)=>(!e||Ot(P,s)||gt(s))&&pe(t,((e,t)=>Ae(s,t,e)),(()=>gt(s))),Ae=(e,t,s,l)=>pe(l?s:De(s,e,t),((l,n)=>L(Je(e,t,n,l),(e=>(s[n]=e,!0)),(()=>!1))),(()=>gt(e,t))),Je=(t,s,l,n)=>e?L(jt(jt(P,t),l),(e=>He(n)!=e[i]?gt(t,s,l,n,e[d]):n),(()=>gt(t,s,l,n))):N(He(n))?gt(t,s,l,n):n,Pe=(e,t)=>pe(t?e:Fe(e),((t,s)=>L(Be(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>bt())),Be=(e,s)=>t?L(jt(D,e),(t=>He(s)!=t[i]?bt(e,s,t[d]):s),(()=>bt(e,s))):N(He(s))?bt(e,s):s,De=(e,t,s)=>(L(jt(B,t),(([l,n])=>{Bt(l,((t,s)=>{he(e,s)||(e[s]=t)})),Bt(n,(l=>{he(e,l)||gt(t,s,l)}))})),e),Fe=e=>(t&&(Bt(F,((t,s)=>{he(e,s)||(e[s]=t)})),Bt(Q,(t=>{he(e,t)||bt(t)}))),e),Qe=e=>Kt(P,e,((e,t,s)=>{const l=Ft(),n=ss();Kt(Gt(P,t,Ft),s,((e,t,s)=>{Wt(e,t,s),L(s[d],(e=>Wt(l,t,e)),(()=>ls(n,t)))})),Wt(B,t,[l,n])}),((e,t)=>{Wt(P,t),Wt(B,t)})),je=e=>Kt(D,e,((e,t,s)=>{Wt(D,t,s),L(s[d],(e=>Wt(F,t,e)),(()=>ls(Q,t)))}),((e,t)=>{Wt(D,t),Wt(F,t),Dt(Q,t)})),Ke=e=>be(e)?Ts():Cs(e),Ue=e=>Kt(W,e,((e,t,s)=>Xe(t,s)),((e,t)=>nt(t))),Xe=(e,t)=>Kt(Gt(W,e,(()=>(it(e,1),Wt(j,e,as()),Wt(H,e,Ft()),Ft()))),t,((t,s,l)=>Ye(e,t,s,l)),((t,s)=>at(e,t,s))),Ye=(e,t,s,l,n)=>Kt(Gt(t,s,(()=>(dt(e,s,1),Ft()))),l,((t,l,n)=>Ze(e,s,t,l,n)),((l,a)=>rt(e,t,s,l,a,n))),Ze=(e,t,s,l,n)=>{Ot(s,l)||ut(e,t,l,1);const a=jt(s,l);n!==a&&(ct(e,t,l,a,n),Wt(s,l,n))},_e=(e,t,s,l,n)=>L(jt(t,s),(t=>Ze(e,s,t,l,n)),(()=>Ye(e,t,s,De({[l]:n},e,s)))),et=e=>be(e)?qs():vs(e),tt=e=>Kt(G,e,((e,t,s)=>st(t,s)),((e,t)=>ot(t))),st=(e,t)=>{Ot(G,e)||ht(e,1);const s=jt(G,e);t!==s&&(mt(e,s,t),Wt(G,e,t))},lt=e=>jt(W,e)??Xe(e,{}),nt=e=>Xe(e,{}),at=(e,t,s)=>{const[,l]=jt(j,e);l(s),Ye(e,t,s,{},!0)},rt=(e,t,s,l,n,a)=>{const r=jt(jt(B,e)?.[0],n);if(!N(r)&&!a)return Ze(e,s,l,n,r);const o=t=>{ct(e,s,t,jt(l,t)),ut(e,s,t,-1),Wt(l,t)};N(r)?o(n):Ht(l,o),At(l)&&(dt(e,s,-1),At(Wt(t,s))&&(it(e,-1),Wt(W,e),Wt(j,e),Wt(H,e)))},ot=e=>{const t=jt(F,e);if(!N(t))return st(e,t);mt(e,jt(G,e)),ht(e,-1),Wt(G,e)},it=(e,t)=>bs(o,e,t),dt=(e,t,s)=>bs(Gt(S,e,Ft),t,s)&&Wt(k,e,Gt(k,e,(()=>0))+s),ut=(e,t,s,l)=>{const n=jt(H,e),a=jt(n,s)??0;(0==a&&1==l||1==a&&-1==l)&&bs(Gt(c,e,Ft),s,l),Wt(n,s,a!=-l?a+l:null),bs(Gt(Gt(T,e,Ft),t,Ft),s,l)},ct=(e,t,s,l,n)=>{Gt(Gt(Gt(V,e,Ft),t,Ft),s,(()=>[l,0]))[1]=n,a[3]?.(e,t,s,n)},ht=(e,t)=>bs(R,e,t),mt=(e,t,s)=>{Gt(q,e,(()=>[t,0]))[1]=s,a[4]?.(e,s)},gt=(e,t,s,l,n)=>(se(Gt(Gt(Gt(M,e,Ft),t,Ft),s,(()=>[])),l),n),bt=(e,t,s)=>(se(Gt(J,e,(()=>[])),t),s),pt=(e,t,s)=>L(jt(jt(jt(V,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...us(Nt(e,t,s))])),It=e=>L(jt(q,e),(([e,t])=>[!0,e,t]),(()=>[!1,...us(ns(e))])),ft=e=>At(M)||At(Ce[e])?0:Bt(e?es(M):M,((t,s)=>Bt(t,((t,l)=>Bt(t,((t,n)=>Ne(Ce[e],[s,l,n],t))))))),yt=e=>At(J)||At(ve[e])?0:Bt(e?Zt(J):J,((t,s)=>Ne(ve[e],[s],t))),wt=(e,t,s,l)=>{if(!At(e))return Ne(t,l,(()=>Ut(e))),Ht(e,((e,t)=>Ne(s,[...l??[],e],1==t))),1},Ct=e=>{const t=os();t!=s&&Ne(K[e],void 0,t);const l=At(oe[e]),n=At(ce[e])&&At(Ie[e])&&At(re[e])&&At(ie[e])&&At(le[e])&&At(ne[e])&&At(ae[e])&&l&&At(X[e])&&At(Y[e]),a=At(we[e])&&At(de[e])&&At(te[e])&&At(U[e]);if(!n||!a){const t=e?[Zt(o),_t(c),Zt(k),_t(S),es(T),es(V)]:[o,c,k,S,T,V];if(!n){wt(t[0],X[e],Y[e]),Bt(t[1],((t,s)=>wt(t,le[e],ne[e],[s]))),Bt(t[2],((t,s)=>{0!=t&&Ne(ae[e],[s],Vt(s))}));const s=ss();Bt(t[3],((t,n)=>{wt(t,re[e],ie[e],[n])&&!l&&(Ne(oe[e],[n,null]),ls(s,n))})),l||Bt(t[5],((t,l)=>{if(!Ot(s,l)){const s=ss();Bt(t,(e=>Bt(e,(([t,l],n)=>l!==t?ls(s,n):Dt(e,n))))),Bt(s,(t=>Ne(oe[e],[l,t])))}})),Bt(t[4],((t,s)=>Bt(t,((t,l)=>wt(t,ce[e],Ie[e],[s,l])))))}if(!a){let s;Bt(t[5],((t,l)=>{let n;Bt(t,((t,a)=>{let r;Bt(t,(([t,o],i)=>{o!==t&&(Ne(we[e],[l,a,i],o,t,pt),s=n=r=1)})),r&&Ne(de[e],[l,a],pt)})),n&&Ne(te[e],[l],pt)})),s&&Ne(U[e],void 0,pt)}}},vt=e=>{const t=ys();t!=l&&Ne(ke[e],void 0,t);const s=At(xe[e])&&At(Te[e]),n=At(Ve[e])&&At(Se[e]);if(!s||!n){const t=e?[Zt(R),Zt(q)]:[R,q];if(s||wt(t[0],xe[e],Te[e]),!n){let s;Bt(t[1],(([t,l],n)=>{l!==t&&(Ne(Ve[e],[n],l,t,It),s=1)})),s&&Ne(Se[e],void 0,It)}}},kt=(e,...t)=>(Ls((()=>e(...ee(t,x)))),$s),St=()=>Yt(W),xt=()=>Qt(W),Tt=e=>Qt(jt(H,x(e))),Vt=e=>Lt(jt(W,x(e))),Rt=e=>Qt(jt(W,x(e))),qt=(e,t,s,l=0,n)=>{return ee(O(Z((a=jt(W,x(e)),r=(e,s)=>[N(t)?s:jt(e,x(t)),s],ee([...a?.entries()??[]],(([e,t])=>r(t,e)))),(([e],[t])=>((e??0)<(t??0)?-1:1)*(s?-1:1))),l,N(n)?n:l+n),(([,e])=>e));var a,r},Mt=(e,t)=>Qt(jt(jt(W,x(e)),x(t))),Nt=(e,t,s)=>jt(jt(jt(W,x(e)),x(t)),x(s)),Jt=()=>Ut(G),ts=()=>Qt(G),ns=e=>jt(G,x(e)),os=()=>!At(W),is=e=>Ot(W,x(e)),ds=(e,t)=>Ot(jt(H,x(e)),x(t)),Is=(e,t)=>Ot(jt(W,x(e)),x(t)),fs=(e,t,s)=>Ot(jt(jt(W,x(e)),x(t)),x(s)),ys=()=>!At(G),ws=e=>Ot(G,x(e)),Cs=e=>kt((()=>(e=>pe(e,Oe,gt))(e)?Ue(e):0)),vs=e=>kt((()=>Pe(e)?tt(e):0)),ks=e=>{try{Ke(fe(e))}catch{}return $s},Ss=t=>kt((()=>{if((e=pe(t,(e=>pe(e,ze))))&&(Qe(t),!At(W))){const e=St();Ts(),Cs(e)}})),xs=e=>kt((()=>{if(t=(e=>pe(e,ze))(e)){const s=Jt();Ns(),qs(),t=!0,je(e),vs(s)}})),Ts=()=>kt((()=>Ue({}))),Vs=e=>kt((e=>Ot(W,e)?nt(e):0),e),Rs=(e,t)=>kt(((e,t)=>L(jt(W,e),(s=>Ot(s,t)?at(e,s,t):0))),e,t),qs=()=>kt((()=>tt({}))),Ms=()=>kt((()=>{Qe({}),e=!1})),Ns=()=>kt((()=>{je({}),t=!1})),Ls=(e,t)=>{if(-1!=n){Es();const s=e();return zs(t),s}},Es=()=>(-1!=n&&n++,1==n&&(a[0]?.(),Ne(Re)),$s),zs=e=>(n>0&&(n--,0==n&&(n=1,ft(1),At(V)||Ct(1),yt(1),At(q)||vt(1),e?.($s)&&(Bt(V,((e,t)=>Bt(e,((e,s)=>Bt(e,(([e],l)=>We($s,t,s,l,e))))))),Pt(V),Bt(q,(([e],t)=>Ge($s,t,e))),Pt(q)),Ne(qe[0],void 0),n=-1,ft(0),At(V)||Ct(0),yt(0),At(q)||vt(0),a[1]?.(),Ne(qe[1],void 0),a[2]?.(),n=0,s=os(),l=ys(),_([o,c,k,S,T,V,M,R,q,J],Pt))),$s),$s={getContent:()=>[St(),Jt()],getTables:St,getTableIds:xt,getTable:e=>Xt(jt(W,x(e))),getTableCellIds:Tt,getRowCount:Vt,getRowIds:Rt,getSortedRowIds:qt,getRow:(e,t)=>Ut(jt(jt(W,x(e)),x(t))),getCellIds:Mt,getCell:Nt,getValues:Jt,getValueIds:ts,getValue:ns,hasTables:os,hasTable:is,hasTableCell:ds,hasRow:Is,hasCell:fs,hasValues:ys,hasValue:ws,getTablesJson:()=>ye(W),getValuesJson:()=>ye(G),getJson:()=>ye([W,G]),getTablesSchemaJson:()=>ye(P),getValuesSchemaJson:()=>ye(D),getSchemaJson:()=>ye([P,D]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>kt((()=>{const t=z(e)?e():e;$e(t)&&(([e,t])=>{(be(e)?Ts:Cs)(e),(be(t)?qs:vs)(t)})(t)})),setTables:Cs,setTable:(e,t)=>kt((e=>Oe(t,e)?Xe(e,t):0),e),setRow:(e,t,s)=>kt(((e,t)=>Ae(e,t,s)?Ye(e,lt(e),t,s):0),e,t),addRow:(e,t,s=!0)=>Ls((()=>{let l;return Ae(e,l,t)&&(e=x(e),Ye(e,lt(e),l=((e,t)=>{const[s]=jt(j,e);let l;do{l=s(t)}while(Ot(jt(W,e),l));return l})(e,s?1:0),t)),l})),setPartialRow:(e,t,s)=>kt(((e,t)=>{if(Ae(e,t,s,1)){const l=lt(e);ge(s,((s,n)=>_e(e,l,t,n,s)))}}),e,t),setCell:(e,t,s,l)=>kt(((e,t,s)=>L(Je(e,t,s,z(l)?l(Nt(e,t,s)):l),(l=>_e(e,lt(e),t,s,l)))),e,t,s),setValues:vs,setPartialValues:e=>kt((()=>Pe(e,1)?ge(e,((e,t)=>st(t,e))):0)),setValue:(e,t)=>kt((e=>L(Be(e,z(t)?t(ns(e)):t),(t=>st(e,t)))),e),applyChanges:e=>kt((()=>{ge(e[0],((e,t)=>N(e)?Vs(t):ge(e,((e,s)=>N(e)?Rs(t,s):ge(e,((e,l)=>We($s,t,s,l,e))))))),ge(e[1],((e,t)=>Ge($s,t,e)))})),setTablesJson:ks,setValuesJson:e=>{try{et(fe(e))}catch{}return $s},setJson:e=>kt((()=>{try{const[t,s]=fe(e);Ke(t),et(s)}catch{ks(e)}})),setTablesSchema:Ss,setValuesSchema:xs,setSchema:(e,t)=>kt((()=>{Ss(e),xs(t)})),delTables:Ts,delTable:Vs,delRow:Rs,delCell:(e,t,s,l)=>kt(((e,t,s)=>L(jt(W,e),(n=>L(jt(n,t),(a=>Ot(a,s)?rt(e,n,t,a,s,l):0))))),e,t,s),delValues:qs,delValue:e=>kt((e=>Ot(G,e)?ot(e):0),e),delTablesSchema:Ms,delValuesSchema:Ns,delSchema:()=>kt((()=>{Ms(),Ns()})),transaction:Ls,startTransaction:Es,getTransactionChanges:()=>[Ut(V,((e,t)=>-1===jt(o,t)?void 0:Ut(e,((e,s)=>-1===jt(jt(S,t),s)?void 0:Ut(e,(([,e])=>e),(e=>gs(e)))),At,be)),At,be),Ut(q,(([,e])=>e),(e=>gs(e))),1],getTransactionLog:()=>[!At(V),!At(q),Yt(V,ms,gs),Yt(M),Ut(q,ms,gs),Ut(J),Ut(o),Xt(S),Yt(T),Ut(R)],finishTransaction:zs,forEachTable:e=>Bt(W,((t,s)=>e(s,(e=>Bt(t,((t,s)=>e(s,(e=>Ht(t,e))))))))),forEachTableCell:(e,t)=>Ht(jt(H,x(e)),t),forEachRow:(e,t)=>Bt(jt(W,x(e)),((e,s)=>t(s,(t=>Ht(e,t))))),forEachCell:(e,t,s)=>Ht(jt(jt(W,x(e)),x(t)),s),forEachValue:e=>Ht(G,e),addSortedRowIdsListener:(e,t,s,l,n,a,r)=>{let o=qt(e,t,s,l,n);return Me((()=>{const r=qt(e,t,s,l,n);var i,d,u;d=o,A(i=r)===A(d)&&(u=(e,t)=>d[t]===e,i.every(u))||(o=r,a($s,e,t,s,l,n,o))}),oe[r?1:0],[e,t],[xt])},addStartTransactionListener:e=>Me(e,Re),addWillFinishTransactionListener:e=>Me(e,qe[0]),addDidFinishTransactionListener:e=>Me(e,qe[1]),callListener:e=>(Ee(e),$s),delListener:e=>(Le(e),$s),getListenerStats:()=>({hasTables:cs(K),tables:cs(U),tableIds:cs(X),hasTable:cs(Y),table:cs(te),tableCellIds:cs(le),hasTableCell:cs(ne,zt),rowCount:cs(ae),rowIds:cs(re),sortedRowIds:cs(oe),hasRow:cs(ie,zt),row:cs(de,zt),cellIds:cs(ce,zt),hasCell:cs(Ie,$t),cell:cs(we,$t),invalidCell:cs(Ce,$t),hasValues:cs(ke),values:cs(Se),valueIds:cs(xe),hasValue:cs(Te),value:cs(Ve),invalidValue:cs(ve),transaction:Et(Re)+cs(qe)}),isMergeable:()=>!1,createStore:ps,addListener:Me,callListeners:Ne,setInternalListeners:(e,t,s,l,n)=>a=[e,t,s,l,n]};return ge({[u+m]:[0,K,[],()=>[os()]],[m]:[0,U],[g]:[0,X],[u+h]:[1,Y,[xt],e=>[is(...e)]],[h]:[1,te,[xt]],[h+y]:[1,le,[xt]],[u+h+f]:[2,ne,[xt,Tt],e=>[ds(...e)]],[p]:[1,ae,[xt]],[I]:[1,re,[xt]],[u+b]:[2,ie,[xt,Rt],e=>[Is(...e)]],[b]:[2,de,[xt,Rt]],[y]:[2,ce,[xt,Rt]],[u+f]:[3,Ie,[xt,Rt,Mt],e=>[fs(...e)]],[f]:[3,we,[xt,Rt,Mt],e=>us(Nt(...e))],InvalidCell:[3,Ce],[u+C]:[0,ke,[],()=>[ys()]],[C]:[0,Se],[v]:[0,xe],[u+w]:[1,Te,[ts],e=>[ws(...e)]],[w]:[1,Ve,[ts],e=>us(ns(e[0]))],InvalidValue:[1,ve]},(([e,t,s,l],n)=>{$s["add"+n+"Listener"]=(...n)=>Me(n[e],t[n[e+1]?1:0],e>0?O(n,0,e):void 0,s,l)})),ue($s)};exports.Inspector=({position:e="right",open:s=!1})=>{const l=t.useCreateStore(ps),n=ve.indexOf(e);return t.useCreatePersister(l,(e=>{return t=we,s=sessionStorage,((e,t,s,l,n,a,r,o={},i=0,d=[])=>{let u,c,h,m=0,g=0,b=0;Gt(os,d,(()=>0)),Gt(is,d,(()=>[]));const p=Ft(),[I,f,y,w,C]=((e=1,t,s)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!s),([[e],[t]])=>!be(e)||!be(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!be(e)||!be(t),t.setContent]:J("Store type not supported by this Persister"))(r,e,i),[v,k,S]=rs((()=>E)),x=e=>{e!=m&&(m=e,k(p,void 0,m))},T=t=>{(I&&$(t?.[0])?1===t?.[2]?e.applyMergeableChanges:e.setMergeableContent:1===t?.[2]?e.applyChanges:e.setContent)(t)},V=async e=>(2!=m&&(x(1),g++,await L((async()=>{try{const s=await t();$(s)?T(s):e?C(e):J("Content is not an array: "+s)}catch(t){e&&C(e)}x(0)}))),E),R=()=>(c&&(n(c),c=void 0),E),q=async e=>(1!=m&&(x(2),b++,await L((async()=>{try{await s(f,e)}catch(e){}x(0)}))),E),M=()=>(h&&(e.delListener(h),h=void 0),E),L=async(...e)=>(se(jt(is,d),...e),await(async()=>{if(!jt(os,d)){for(Wt(os,d,1);!N(u=le(jt(is,d)));)try{await u()}catch(e){}Wt(os,d,0)}})(),E),E={load:V,startAutoLoad:async e=>{R(),await V(e);try{c=await l((async(e,t)=>{t||e?2!=m&&(x(1),g++,T(t??e),x(0)):await V()}))}catch(e){}return E},stopAutoLoad:R,isAutoLoading:()=>!N(c),save:q,startAutoSave:async()=>(M(),await q(),h=e.addDidFinishTransactionListener((()=>{const e=y();w(e)&&q(e)})),E),stopAutoSave:M,isAutoSaving:()=>!N(h),getStatus:()=>m,addStatusListener:e=>v(e,p),delListener:t=>(S(t),e),schedule:L,getStore:()=>e,destroy:()=>(jt(is,d).splice(0,void 0),R().stopAutoSave()),getStats:()=>({loads:g,saves:b}),...o};return ue(E)})(e,(async()=>{return e=s.getItem(t),fe(e,((e,t)=>"￼"===t?void 0:t));var e}),(async e=>{return s.setItem(t,(l=e(),Ie(l,((e,t)=>void 0===t?"￼":t))));var l}),(e=>{const l=l=>{if(l.storageArea===s&&l.key===t)try{e(fe(l.newValue))}catch{e()}};return T.addEventListener(ds,l),l}),(e=>T.removeEventListener(ds,e)),0,3,{getStorageName:()=>t});var t,s}),void 0,(async e=>{await e.load([{},{position:-1==n?1:n,open:!!s}]),await e.startAutoSave()})),F(B,null,F("aside",{id:we},F(Qe,{s:l}),F(Mt,{s:l})),F("style",null,Fe))};
