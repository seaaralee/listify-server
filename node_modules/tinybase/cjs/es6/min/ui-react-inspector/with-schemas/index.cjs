"use strict";var e=require("react"),t=require("../../ui-react/with-schemas/index.cjs");const l=e=>typeof e,n="",s=l(n),r=l(!0),a=l(0),o=l(l),i="type",u="default",d="Has",c="Ids",h="Table",m=h+"s",p=h+c,b="Row",g=b+"Count",v=b+c,f="Cell",I=f+c,y="Value",w=y+"s",C=y+c,k="currentTarget",x="value",S=e=>n+e,T=globalThis.window,V=Math,O=V.min,R=V.floor,q=isFinite,M=e=>null==e,P=(e,t,l)=>M(e)?null==l?void 0:l():t(e),N=e=>e==s||e==r,L=e=>l(e)==o,E=e=>Array.isArray(e),j=(e,t,l)=>e.slice(t,l),z=e=>e.length,$=e=>{throw Error(e)},{PureComponent:A,Fragment:J,createContext:D,createElement:B,useCallback:F,useContext:Q,useEffect:H,useLayoutEffect:W,useMemo:G,useRef:K,useState:U,useSyncExternalStore:X}=e,Y=(e,...t)=>M(e)?{}:e(...t),Z=(e,t)=>e.sort(t),_=(e,t)=>e.forEach(t),ee=(e,t)=>e.map(t),te=e=>0==z(e),le=(e,...t)=>e.push(...t),ne=e=>e.shift(),se=Object,re=e=>se.getPrototypeOf(e),ae=se.entries,oe=se.isFrozen,ie=e=>!M(e)&&P(re(e),(e=>e==se.prototype||M(re(e))),(()=>!0)),ue=se.keys,de=se.freeze,ce=(e=[])=>se.fromEntries(e),he=(e,t)=>t in e,me=(e,t)=>(delete e[t],e),pe=(e,t)=>ee(ae(e),(([e,l])=>t(l,e))),be=e=>ie(e)&&0==(e=>z(ue(e)))(e),ge=(e,t,l,n=0)=>M(e)||!ie(e)||!n&&be(e)||oe(e)?(null==l||l(),!1):(pe(e,((l,n)=>{t(l,n)||me(e,n)})),!!n||!be(e)),ve=JSON.stringify,fe=JSON.parse,Ie=e=>ve(e,((e,t)=>t instanceof Map?se.fromEntries([...t]):t)),ye="tinybaseInspector",we="TinyBase Inspector",Ce=["left","top","bottom","right","full"],ke="state",xe="sort",Se="open",Te="position",Ve=Se,Oe="editable",Re=(...e)=>Ie(e),qe=(e,t)=>ee(Z([...e]),t),Me=(e,l)=>[!!t.useCell(ke,e,Oe,l),F((t=>{l.setCell(ke,e,Oe,(e=>!e)),t.preventDefault()}),[l,e])],Pe="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",Ne='content:url("',Le=Ne+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",Ee='</svg>")',je=Ne+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",ze=ee([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,l,n])=>Le+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${l}' height='${n}' fill='white'/>`+Ee)),$e=Le+"<path d='M20 20l60 60M20 80l60-60' />"+Ee,Ae=Le+`<path d='${Pe}' />`+Ee,Je=Le+`<path d='${Pe}M20 20l60 60' />`+Ee;var De=Object.defineProperty,Be=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Ge=(e,t,l)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ke=(e,t)=>{for(var l in t||(t={}))He.call(t,l)&&Ge(e,l,t[l]);if(Qe)for(var l of Qe(t))We.call(t,l)&&Ge(e,l,t[l]);return e},Ue=(e,t)=>Be(e,Fe(t));const Xe="*::-webkit-scrollbar",Ye=((e,t="")=>e.join(t))(pe(Ue(Ke(Ue(Ke(Ue(Ke({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[Xe]:"width:0.5rem;height:0.5rem;",[Xe+"-track"]:"background:#111",[Xe+"-thumb"]:"background:#999;border:1px solid #111",[Xe+"-thumb:hover"]:"background:#fff",[Xe+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+je},ce(ee(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e])))),{main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;"}),ce(ee(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e])))),{header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":je,"header>img:nth-of-type(6)":$e}),ce(ee(ze,((e,t)=>[`header>img[data-id='${t}']`,e])))),{"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":Ae,"details[open]>summary img.done":Je,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${ye} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"}),((e,t)=>e?`#${ye} ${t}{${e}}`:""))),Ze=({s:e})=>{var l;const n=null!=(l=t.useValue(Te,e))?l:1,s=t.useSetValueCallback(Ve,(()=>!0),[],e);return t.useValue(Ve,e)?null:B("img",{onClick:s,title:we,"data-position":n})},_e=({uniqueId:e,summary:l,editable:n,handleEditable:s,children:r,s:a})=>{const o=!!t.useCell(ke,e,Se,a),i=t.useSetCellCallback(ke,e,Se,(e=>e[k].open),[],a);return B("details",{open:o,onToggle:i},B("summary",null,l,s?B("img",{onClick:s,className:n?"done":"edit"}):null),r)},et=e=>{const t=l(e);return N(t)||t==a&&q(e)?t:void 0},tt=(e,t,l,n,s)=>M(s)?e.delCell(t,l,n,!0):e.setCell(t,l,n,s),lt=(e,t,l)=>M(l)?e.delValue(t):e.setValue(t,l),nt=(e,t,l,n)=>e==s?t:e==a?l:n;var st=Object.defineProperty,rt=Object.defineProperties,at=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,dt=(e,t,l)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ct=(e,t)=>{for(var l in t||(t={}))it.call(t,l)&&dt(e,l,t[l]);if(ot)for(var l of ot(t))ut.call(t,l)&&dt(e,l,t[l]);return e},ht=(e,t)=>rt(e,at(t)),mt=(e,t)=>{var l={};for(var n in e)it.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&ot)for(var n of ot(e))t.indexOf(n)<0&&ut.call(e,n)&&(l[n]=e[n]);return l};const pt="editable",bt=(e,l)=>ee(t.useTableCellIds(e,l),(t=>e+"."+t)),gt=(e,t,l)=>{const n=F(e,t);return l?n:void 0},vt=(...e)=>G((()=>e),e),ft=(e,t)=>G((()=>({store:e,tableId:t})),[e,t]),It=(e,t)=>G((()=>({queries:e,queryId:t})),[e,t]),yt=(e,t=!1,l,n=0,s,r,a,o)=>{const[[i,u,d],c]=U([e,t,n]),h=F((e=>{c(e),null==o||o(e)}),[o]),m=gt((e=>h([e,e==i&&!u,d])),[h,i,u,d],l),p=F((e=>h([i,u,e])),[h,i,u]),b=!0===a?Nt:a;return[[i,u,d],m,G((()=>!1===a?null:B(b,{offset:d,limit:s,total:r,onChange:p})),[a,b,d,s,r,p])]},wt=(e,t,n)=>G((()=>{const r=null!=t?t:e;return a=E(r)?ce(ee(r,(e=>[e,e]))):r,o=(e,t)=>ct(ct({},{label:t,component:n}),l(e)==s?{label:e}:e),ce(pe(a,((e,t)=>[t,o(e,t)])));var a,o}),[t,n,e]),Ct=({className:e,headerRow:t,idColumn:l,params:[n,s,r,a,o,i]})=>B("table",{className:e},i?B("caption",null,i):null,!1===t?null:B("thead",null,B("tr",null,!1===l?null:B(kt,{sort:null!=a?a:[],label:"Id",onClick:o}),pe(n,(({label:e},t)=>B(kt,{key:t,cellId:t,label:e,sort:null!=a?a:[],onClick:o}))))),B("tbody",null,ee(r,(e=>B("tr",{key:e},!1===l?null:B("th",null,e),pe(n,(({component:t,getComponentProps:l},n)=>B("td",{key:n},B(t,ht(ct(ct({},Y(l,e,n)),s),{rowId:e,cellId:n})))))))))),kt=({cellId:e,sort:[t,l],label:s=(null!=e?e:n),onClick:r})=>B("th",{onClick:gt((()=>null==r?void 0:r(e)),[r,e],r),className:M(l)||t!=e?void 0:`sorted ${l?"de":"a"}scending`},M(l)||t!=e?null:(l?"↓":"↑")+" ",s),xt=({localRowId:e,params:[l,n,s,r,a,o,i]})=>{const u=t.useRemoteRowId(a,e,o);return B("tr",null,!1===l?null:B(J,null,B("th",null,e),B("th",null,u)),pe(n,(({component:t,getComponentProps:l},n)=>{const[a,o]=((e,t="",l)=>e.split(t,l))(n,".",2),d=a===s?e:a===r?u:null;return M(d)?null:B("td",{key:n},B(t,ht(ct({},Y(l,d,o)),{store:i,tableId:a,rowId:d,cellId:o})))})))},St=({thing:e,onThingChange:t,className:l,hasSchema:n,showType:o=!0})=>{const[i,u]=U(),[d,c]=U(),[h,m]=U(),[p,b]=U(),[g,v]=U();d!==e&&(u(et(e)),c(e),m(e+""),b(Number(e)||0),v(!!e));const f=F(((e,l)=>{l(e),c(e),t(e)}),[t]),I=F((()=>{if(!(null==n?void 0:n())){const e=nt(i,a,r,s),l=nt(e,h,p,g);u(e),c(l),t(l)}}),[n,t,h,p,g,i]);return B("div",{className:l},o?B("button",{className:i,onClick:I},i):null,nt(i,B("input",{key:i,value:h,onChange:F((e=>f(e[k][x]+"",m)),[f])}),B("input",{key:i,type:"number",value:p,onChange:F((e=>f(Number(e[k][x]||0),b)),[f])}),B("input",{key:i,type:"checkbox",checked:g,onChange:F((e=>f(!!e[k].checked,v)),[f])})))},Tt=e=>{var l=e,{tableId:n,cellId:s,descending:r,offset:a,limit:o,store:i,editable:u,sortOnClick:d,paginator:c=!1,onChange:h,customCells:m}=l,p=mt(l,["tableId","cellId","descending","offset","limit","store","editable","sortOnClick","paginator","onChange","customCells"]);const[b,g,v]=yt(s,r,d,a,o,t.useRowCount(n,i),c,h);return B(Ct,ht(ct({},p),{params:vt(wt(t.useTableCellIds(n,i),m,u?Mt:t.CellView),ft(i,n),t.useSortedRowIds(n,...b,o,i),b,g,v)}))},Vt=({store:e,editable:l=!1,valueComponent:n=(l?Pt:t.ValueView),getValueComponentProps:s,className:r,headerRow:a,idColumn:o})=>B("table",{className:r},!1===a?null:B("thead",null,B("tr",null,!1===o?null:B("th",null,"Id"),B("th",null,y))),B("tbody",null,ee(t.useValueIds(e),(t=>B("tr",{key:t},!1===o?null:B("th",null,t),B("td",null,B(n,ht(ct({},Y(s,t)),{valueId:t,store:e})))))))),Ot=e=>{var l=e,{indexId:n,sliceId:s,indexes:r,editable:a,customCells:o}=l,i=mt(l,["indexId","sliceId","indexes","editable","customCells"]);const[u,d,c]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getTableId(t)])(t.useIndexesOrIndexesById(r),n);return B(Ct,ht(ct({},i),{params:vt(wt(t.useTableCellIds(c,d),o,a?Mt:t.CellView),ft(d,c),t.useSliceRowIds(n,s,u))}))},Rt=({relationshipId:e,relationships:l,editable:n,customCells:s,className:r,headerRow:a,idColumn:o=!0})=>{const[i,u,d,c]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getLocalTableId(t),null==e?void 0:e.getRemoteTableId(t)])(t.useRelationshipsOrRelationshipsById(l),e),h=wt([...bt(d,u),...bt(c,u)],s,n?Mt:t.CellView),m=vt(o,h,d,c,e,i,u);return B("table",{className:r},!1===a?null:B("thead",null,B("tr",null,!1===o?null:B(J,null,B("th",null,d,".Id"),B("th",null,c,".Id")),pe(h,(({label:e},t)=>B("th",{key:t},e))))),B("tbody",null,ee(t.useRowIds(d,u),(e=>B(xt,{key:e,localRowId:e,params:m})))))},qt=e=>{var l=e,{queryId:n,cellId:s,descending:r,offset:a,limit:o,queries:i,sortOnClick:u,paginator:d=!1,customCells:c,onChange:h}=l,m=mt(l,["queryId","cellId","descending","offset","limit","queries","sortOnClick","paginator","customCells","onChange"]);const[p,b,g]=yt(s,r,u,a,o,t.useResultRowCount(n,i),d,h);return B(Ct,ht(ct({},m),{params:vt(wt(t.useResultTableCellIds(n,i),c,t.ResultCellView),It(i,n),t.useResultSortedRowIds(n,...p,o,i),p,b,g)}))},Mt=({tableId:e,rowId:l,cellId:n,store:s,className:r,showType:a})=>{var o;return B(St,{thing:t.useCell(e,l,n,s),onThingChange:t.useSetCellCallback(e,l,n,(e=>e),[],s),className:null!=r?r:pt+f,showType:a,hasSchema:null==(o=t.useStoreOrStoreById(s))?void 0:o.hasTablesSchema})},Pt=({valueId:e,store:l,className:n,showType:s})=>{var r;return B(St,{thing:t.useValue(e,l),onThingChange:t.useSetValueCallback(e,(e=>e),[],l),className:null!=n?n:pt+y,showType:s,hasSchema:null==(r=t.useStoreOrStoreById(l))?void 0:r.hasValuesSchema})},Nt=({onChange:e,total:t,offset:l=0,limit:n=t,singular:s="row",plural:r=s+"s"})=>{(l>t||l<0)&&(l=0,e(0));const a=gt((()=>e(l-n)),[e,l,n],l>0),o=gt((()=>e(l+n)),[e,l,n],l+n<t);return B(J,null,t>n&&B(J,null,B("button",{className:"previous",disabled:0==l,onClick:a},"←"),B("button",{className:"next",disabled:l+n>=t,onClick:o},"→"),l+1," to ",O(t,l+n)," of "),t," ",1!=t?r:s)},Lt=({indexes:e,indexesId:l,indexId:n,s:s})=>B(_e,{uniqueId:Re("i",l,n),summary:"Index: "+n,s:s},ee(t.useSliceIds(n,e),(t=>B(Et,{indexes:e,indexesId:l,indexId:n,sliceId:t,s:s,key:t})))),Et=({indexes:e,indexesId:t,indexId:l,sliceId:n,s:s})=>{const r=Re("i",t,l,n),[a,o]=Me(r,s);return B(_e,{uniqueId:r,summary:"Slice: "+n,editable:a,handleEditable:o,s:s},B(Ot,{sliceId:n,indexId:l,indexes:e,editable:a}))},jt=({indexesId:e,s:l})=>{const n=t.useIndexes(e),s=t.useIndexIds(n);return M(n)?null:B(_e,{uniqueId:Re("i",e),summary:"Indexes: "+(null!=e?e:u),s:l},te(s)?"No indexes defined":qe(s,(t=>B(Lt,{indexes:n,indexesId:e,indexId:t,s:l,key:t}))))},zt=({metrics:e,metricId:l})=>B("tr",null,B("th",null,l),B("td",null,null==e?void 0:e.getTableId(l)),B("td",null,t.useMetric(l,e))),$t=({metricsId:e,s:l})=>{const n=t.useMetrics(e),s=t.useMetricIds(n);return M(n)?null:B(_e,{uniqueId:Re("m",e),summary:"Metrics: "+(null!=e?e:u),s:l},te(s)?"No metrics defined":B("table",null,B("thead",null,B("th",null,"Metric Id"),B("th",null,"Table Id"),B("th",null,"Metric")),B("tbody",null,ee(s,(e=>B(zt,{metrics:n,metricId:e,key:e}))))))},At=({queries:e,queriesId:l,queryId:n,s:s})=>{var r;const a=Re("q",l,n),[o,i,u]=fe(null!=(r=t.useCell(ke,a,xe,s))?r:"[]"),d=t.useSetCellCallback(ke,a,xe,Ie,[],s);return B(_e,{uniqueId:a,summary:"Query: "+n,s:s},B(qt,{queryId:n,queries:e,cellId:o,descending:i,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:d}))},Jt=({queriesId:e,s:l})=>{const n=t.useQueries(e),s=t.useQueryIds(n);return M(n)?null:B(_e,{uniqueId:Re("q",e),summary:"Queries: "+(null!=e?e:u),s:l},te(s)?"No queries defined":qe(s,(t=>B(At,{queries:n,queriesId:e,queryId:t,s:l,key:t}))))},Dt=({relationships:e,relationshipsId:t,relationshipId:l,s:n})=>{const s=Re("r",t,l),[r,a]=Me(s,n);return B(_e,{uniqueId:s,summary:"Relationship: "+l,editable:r,handleEditable:a,s:n},B(Rt,{relationshipId:l,relationships:e,editable:r}))},Bt=({relationshipsId:e,s:l})=>{const n=t.useRelationships(e),s=t.useRelationshipIds(n);return M(n)?null:B(_e,{uniqueId:Re("r",e),summary:"Relationships: "+(null!=e?e:u),s:l},te(s)?"No relationships defined":qe(s,(t=>B(Dt,{relationships:n,relationshipsId:e,relationshipId:t,s:l,key:t}))))},Ft=({tableId:e,store:l,storeId:n,s:s})=>{var r;const a=Re("t",n,e),[o,i,u]=fe(null!=(r=t.useCell(ke,a,xe,s))?r:"[]"),d=t.useSetCellCallback(ke,a,xe,Ie,[],s),[c,m]=Me(a,s);return B(_e,{uniqueId:a,summary:h+": "+e,editable:c,handleEditable:m,s:s},B(Tt,{tableId:e,store:l,cellId:o,descending:i,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:d,editable:c}))},Qt=({store:e,storeId:l,s:n})=>{const s=Re("v",l),[r,a]=Me(s,n);return te(t.useValueIds(e))?null:B(_e,{uniqueId:s,summary:w,editable:r,handleEditable:a,s:n},B(Vt,{store:e,editable:r}))},Ht=({storeId:e,s:l})=>{const n=t.useStore(e),s=t.useTableIds(n);return M(n)?null:B(_e,{uniqueId:Re("s",e),summary:(n.isMergeable()?"Mergeable":"")+"Store: "+(null!=e?e:u),s:l},B(Qt,{storeId:e,store:n,s:l}),qe(s,(t=>B(Ft,{store:n,storeId:e,tableId:t,s:l,key:t}))))},Wt=({s:e})=>{const l=K(null),n=K(0),[s,r]=U(!1),{scrollLeft:a,scrollTop:o}=t.useValues(e);W((()=>{const e=l.current;if(e&&!s){const t=new MutationObserver((()=>{e.scrollWidth>=R(a)+e.clientWidth&&e.scrollHeight>=R(o)+e.clientHeight&&e.scrollTo(a,o)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[s,a,o]);const i=F((t=>{const{scrollLeft:l,scrollTop:s}=t[k];cancelIdleCallback(n.current),n.current=requestIdleCallback((()=>{r(!0),e.setPartialValues({scrollLeft:l,scrollTop:s})}))}),[e]),u=t.useStore(),d=t.useStoreIds(),c=t.useMetrics(),h=t.useMetricsIds(),m=t.useIndexes(),p=t.useIndexesIds(),b=t.useRelationships(),g=t.useRelationshipsIds(),v=t.useQueries(),f=t.useQueriesIds();return M(u)&&te(d)&&M(c)&&te(h)&&M(m)&&te(p)&&M(b)&&te(g)&&M(v)&&te(f)?B("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):B("article",{ref:l,onScroll:i},B(Ht,{s:e}),ee(d,(t=>B(Ht,{storeId:t,s:e,key:t}))),B($t,{s:e}),ee(h,(t=>B($t,{metricsId:t,s:e,key:t}))),B(jt,{s:e}),ee(p,(t=>B(jt,{indexesId:t,s:e,key:t}))),B(Bt,{s:e}),ee(g,(t=>B(Bt,{relationshipsId:t,s:e,key:t}))),B(Jt,{s:e}),ee(f,(t=>B(Jt,{queriesId:t,s:e,key:t}))))};var Gt=Object.defineProperty;class Kt extends A{constructor(e){var t,l,n;super(e),n=(e,t)=>console.error(e,t.componentStack),(l="componentDidCatch")in(t=this)?Gt(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?B("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const Ut=({s:e})=>{var l;const n=null!=(l=t.useValue(Te,e))?l:1,s=t.useSetValueCallback(Ve,(()=>!1),[],e),r=t.useSetValueCallback(Te,(e=>Number(e[k].dataset.id)),[],e);return B("header",null,B("img",{title:we}),B("span",null,we),ee(Ce,((e,t)=>t==n?null:B("img",{onClick:r,"data-id":t,title:"Dock to "+e,key:t}))),B("img",{onClick:s,title:"Close"}))},Xt=({s:e})=>{var l;const n=null!=(l=t.useValue(Te,e))?l:1;return t.useValue(Ve,e)?B("main",{"data-position":n},B(Ut,{s:e}),B(Kt,null,B(Wt,{s:e}))):null},Yt=e=>t=>{return l=(t,l)=>t+e(l),sl(t).reduce(l,0);var l},Zt=e=>{var t;return null!=(t=null==e?void 0:e.size)?t:0},_t=Yt(Zt),el=Yt(_t),tl=Yt(el),ll=(e,t)=>{var l;return null!=(l=null==e?void 0:e.has(t))&&l},nl=e=>M(e)||0==Zt(e),sl=e=>{var t;return[...null!=(t=null==e?void 0:e.values())?t:[]]},rl=e=>e.clear(),al=(e,t)=>null==e?void 0:e.forEach(t),ol=(e,t)=>null==e?void 0:e.delete(t),il=e=>new Map(e),ul=e=>{var t;return[...null!=(t=null==e?void 0:e.keys())?t:[]]},dl=(e,t)=>null==e?void 0:e.get(t),cl=(e,t)=>al(e,((e,l)=>t(l,e))),hl=(e,t,l)=>M(l)?(ol(e,t),e):null==e?void 0:e.set(t,l),ml=(e,t,l,n)=>(ll(e,t)?null==n||n(dl(e,t)):hl(e,t,l()),dl(e,t)),pl=(e,t,l,n=hl)=>(pe(t,((t,n)=>l(e,n,t))),cl(e,(l=>he(t,l)?0:n(e,l))),e),bl=(e,t,l,n)=>{const s={};return al(e,((e,r)=>{if(!(null==l?void 0:l(e,r))){const l=t?t(e,r):e;(null==n?void 0:n(l))||(s[r]=l)}})),s},gl=(e,t,l)=>bl(e,(e=>bl(e,t,l)),nl,be),vl=(e,t,l)=>bl(e,(e=>gl(e,t,l)),nl,be),fl=(e,t)=>{const l=il();return al(e,((e,n)=>{var s;return l.set(n,null!=(s=null==t?void 0:t(e))?s:e)})),l},Il=e=>fl(e,fl),yl=e=>fl(e,Il),wl=(e,t,l,n,s=0)=>P((l?ml:dl)(e,t[s],s>z(t)-2?l:il),(r=>{if(s>z(t)-2)return(null==n?void 0:n(r))&&hl(e,t[s]),r;const a=wl(r,t,l,n,s+1);return nl(r)&&hl(e,t[s]),a})),Cl=e=>new Set(E(e)||M(e)?e:[e]),kl=(e,t)=>null==e?void 0:e.add(t),xl=/^\d+$/,Sl=()=>{const e=[];let t=0;return[l=>{var s;return null!=(s=l?ne(e):null)?s:n+t++},t=>{xl.test(t)&&z(e)<1e3&&le(e,t)}]},Tl=e=>{let t;const[l,s]=Sl(),r=il();return[(s,a,o,i=[],u=()=>[])=>{null!=t||(t=e());const d=l(1);return hl(r,d,[s,a,o,i,u]),kl(wl(a,null!=o?o:[n],Cl),d),d},(e,l,...s)=>_(((e,t=[n])=>{const l=[],s=(e,n)=>n==z(t)?le(l,e):null===t[n]?al(e,(e=>s(e,n+1))):_([t[n],null],(t=>s(dl(e,t),n+1)));return s(e,0),l})(e,l),(e=>al(e,(e=>dl(r,e)[0](t,...null!=l?l:[],...s))))),e=>P(dl(r,e),(([,t,l])=>(wl(t,null!=l?l:[n],void 0,(t=>(ol(t,e),nl(t)?1:0))),hl(r,e),s(e),l))),e=>P(dl(r,e),(([e,,l=[],n,s])=>{const r=(...a)=>{var o,i;const u=z(a);u==z(l)?e(t,...a,...s(a)):M(l[u])?_(null!=(i=null==(o=n[u])?void 0:o.call(n,...a))?i:[],(e=>r(...a,e))):r(...a,l[u])};r()}))]};var Vl=Object.defineProperty,Ol=Object.getOwnPropertySymbols,Rl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable,Ml=(e,t,l)=>t in e?Vl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Pl=(e,t,l)=>new Promise(((n,s)=>{var r=e=>{try{o(l.next(e))}catch(e){s(e)}},a=e=>{try{o(l.throw(e))}catch(e){s(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,a);o((l=l.apply(e,t)).next())}));const Nl=il(),Ll=il();var El=(e,t,l)=>new Promise(((n,s)=>{var r=e=>{try{o(l.next(e))}catch(e){s(e)}},a=e=>{try{o(l.throw(e))}catch(e){s(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,a);o((l=l.apply(e,t)).next())}));const jl="storage",zl=e=>[e,e],$l=(e,t=_t)=>t(e[0])+t(e[1]),Al=()=>[il(),il()],Jl=e=>[...e],Dl=([e,t])=>e===t,Bl=(e,t,l)=>hl(e,t,dl(e,t)==-l?void 0:l),Fl=()=>{let e,t,l=!1,n=!1,s=0,r=[];const o=il(),c=il(),k=il(),x=il(),T=il(),V=il(),O=il(),R=il(),q=il(),$=il(),A=il(),J=il(),D=il(),B=il(),F=Cl(),Q=il(),H=il(),W=il(),G=il(),K=Al(),U=Al(),X=Al(),Y=Al(),te=Al(),ne=Al(),se=Al(),re=Al(),ae=Al(),oe=Al(),ie=Al(),ue=Al(),ce=Al(),ve=Al(),ye=Al(),we=Al(),Ce=Al(),ke=Al(),xe=Al(),Se=Al(),Te=Al(),Ve=Al(),Oe=il(),Re=Al(),[qe,Me,Pe,Ne]=Tl((()=>Ol)),Le=e=>{if(!ge(e,((e,t)=>[i,u].includes(t))))return!1;const t=e[i];return!(!N(t)&&t!=a||(et(e[u])!=t&&me(e,u),0))},Ee=E,je=(t,l)=>(!e||ll(A,l)||pt(l))&&ge(t,((e,t)=>ze(l,t,e)),(()=>pt(l))),ze=(e,t,l,n)=>ge(n?l:De(l,e,t),((n,s)=>P($e(e,t,s,n),(e=>(l[s]=e,!0)),(()=>!1))),(()=>pt(e,t))),$e=(t,l,n,s)=>e?P(dl(dl(A,t),n),(e=>et(s)!=e[i]?pt(t,l,n,s,e[u]):s),(()=>pt(t,l,n,s))):M(et(s))?pt(t,l,n,s):s,Ae=(e,t)=>ge(t?e:Be(e),((t,l)=>P(Je(l,t),(t=>(e[l]=t,!0)),(()=>!1))),(()=>bt())),Je=(e,l)=>t?P(dl(D,e),(t=>et(l)!=t[i]?bt(e,l,t[u]):l),(()=>bt(e,l))):M(et(l))?bt(e,l):l,De=(e,t,l)=>(P(dl(J,t),(([n,s])=>{al(n,((t,l)=>{he(e,l)||(e[l]=t)})),al(s,(n=>{he(e,n)||pt(t,l,n)}))})),e),Be=e=>(t&&(al(B,((t,l)=>{he(e,l)||(e[l]=t)})),al(F,(t=>{he(e,t)||bt(t)}))),e),Fe=e=>pl(A,e,((e,t,l)=>{const n=il(),s=Cl();pl(ml(A,t,il),l,((e,t,l)=>{hl(e,t,l),P(l[u],(e=>hl(n,t,e)),(()=>kl(s,t)))})),hl(J,t,[n,s])}),((e,t)=>{hl(A,t),hl(J,t)})),Qe=e=>pl(D,e,((e,t,l)=>{hl(D,t,l),P(l[u],(e=>hl(B,t,e)),(()=>kl(F,t)))}),((e,t)=>{hl(D,t),hl(B,t),ol(F,t)})),He=e=>be(e)?Gt():Bt(e),We=e=>pl(W,e,((e,t,l)=>Ge(t,l)),((e,t)=>st(t))),Ge=(e,t)=>pl(ml(W,e,(()=>(it(e,1),hl(Q,e,Sl()),hl(H,e,il()),il()))),t,((t,l,n)=>Ke(e,t,l,n)),((t,l)=>rt(e,t,l))),Ke=(e,t,l,n,s)=>pl(ml(t,l,(()=>(ut(e,l,1),il()))),n,((t,n,s)=>Ue(e,l,t,n,s)),((n,r)=>at(e,t,l,n,r,s))),Ue=(e,t,l,n,s)=>{ll(l,n)||dt(e,t,n,1);const r=dl(l,n);s!==r&&(ct(e,t,n,r,s),hl(l,n,s))},Xe=(e,t,l,n,s)=>P(dl(t,l),(t=>Ue(e,l,t,n,s)),(()=>Ke(e,t,l,De({[n]:s},e,l)))),Ye=e=>be(e)?Xt():Ft(e),Ze=e=>pl(G,e,((e,t,l)=>_e(t,l)),((e,t)=>ot(t))),_e=(e,t)=>{ll(G,e)||ht(e,1);const l=dl(G,e);t!==l&&(mt(e,l,t),hl(G,e,t))},nt=e=>{var t;return null!=(t=dl(W,e))?t:Ge(e,{})},st=e=>Ge(e,{}),rt=(e,t,l)=>{const[,n]=dl(Q,e);n(l),Ke(e,t,l,{},!0)},at=(e,t,l,n,s,r)=>{var a;const o=dl(null==(a=dl(J,e))?void 0:a[0],s);if(!M(o)&&!r)return Ue(e,l,n,s,o);const i=t=>{ct(e,l,t,dl(n,t)),dt(e,l,t,-1),hl(n,t)};M(o)?i(s):cl(n,i),nl(n)&&(ut(e,l,-1),nl(hl(t,l))&&(it(e,-1),hl(W,e),hl(Q,e),hl(H,e)))},ot=e=>{const t=dl(B,e);if(!M(t))return _e(e,t);mt(e,dl(G,e)),ht(e,-1),hl(G,e)},it=(e,t)=>Bl(o,e,t),ut=(e,t,l)=>Bl(ml(x,e,il),t,l)&&hl(k,e,ml(k,e,(()=>0))+l),dt=(e,t,l,n)=>{var s;const r=dl(H,e),a=null!=(s=dl(r,l))?s:0;(0==a&&1==n||1==a&&-1==n)&&Bl(ml(c,e,il),l,n),hl(r,l,a!=-n?a+n:null),Bl(ml(ml(T,e,il),t,il),l,n)},ct=(e,t,l,n,s)=>{var a;ml(ml(ml(V,e,il),t,il),l,(()=>[n,0]))[1]=s,null==(a=r[3])||a.call(r,e,t,l,s)},ht=(e,t)=>Bl(O,e,t),mt=(e,t,l)=>{var n;ml(R,e,(()=>[t,0]))[1]=l,null==(n=r[4])||n.call(r,e,l)},pt=(e,t,l,n,s)=>(le(ml(ml(ml(q,e,il),t,il),l,(()=>[])),n),s),bt=(e,t,l)=>(le(ml($,e,(()=>[])),t),l),gt=(e,t,l)=>P(dl(dl(dl(V,e),t),l),(([e,t])=>[!0,e,t]),(()=>[!1,...zl(Mt(e,t,l))])),vt=e=>P(dl(R,e),(([e,t])=>[!0,e,t]),(()=>[!1,...zl(Lt(e))])),ft=e=>nl(q)||nl(we[e])?0:al(e?yl(q):q,((t,l)=>al(t,((t,n)=>al(t,((t,s)=>Me(we[e],[l,n,s],t))))))),It=e=>nl($)||nl(Ce[e])?0:al(e?fl($):$,((t,l)=>Me(Ce[e],[l],t))),yt=(e,t,l,n)=>{if(!nl(e))return Me(t,n,(()=>bl(e))),cl(e,((e,t)=>Me(l,[...null!=n?n:[],e],1==t))),1},wt=e=>{const t=Et();t!=l&&Me(K[e],void 0,t);const n=nl(oe[e]),s=nl(ce[e])&&nl(ve[e])&&nl(ae[e])&&nl(ie[e])&&nl(ne[e])&&nl(se[e])&&nl(re[e])&&n&&nl(X[e])&&nl(Y[e]),r=nl(ye[e])&&nl(ue[e])&&nl(te[e])&&nl(U[e]);if(!s||!r){const t=e?[fl(o),Il(c),fl(k),Il(x),yl(T),yl(V)]:[o,c,k,x,T,V];if(!s){yt(t[0],X[e],Y[e]),al(t[1],((t,l)=>yt(t,ne[e],se[e],[l]))),al(t[2],((t,l)=>{0!=t&&Me(re[e],[l],Vt(l))}));const l=Cl();al(t[3],((t,s)=>{yt(t,ae[e],ie[e],[s])&&!n&&(Me(oe[e],[s,null]),kl(l,s))})),n||al(t[5],((t,n)=>{if(!ll(l,n)){const l=Cl();al(t,(e=>al(e,(([t,n],s)=>n!==t?kl(l,s):ol(e,s))))),al(l,(t=>Me(oe[e],[n,t])))}})),al(t[4],((t,l)=>al(t,((t,n)=>yt(t,ce[e],ve[e],[l,n])))))}if(!r){let l;al(t[5],((t,n)=>{let s;al(t,((t,r)=>{let a;al(t,(([t,o],i)=>{o!==t&&(Me(ye[e],[n,r,i],o,t,gt),l=s=a=1)})),a&&Me(ue[e],[n,r],gt)})),s&&Me(te[e],[n],gt)})),l&&Me(U[e],void 0,gt)}}},Ct=e=>{const t=Jt();t!=n&&Me(ke[e],void 0,t);const l=nl(Se[e])&&nl(Te[e]),s=nl(Ve[e])&&nl(xe[e]);if(!l||!s){const t=e?[fl(O),fl(R)]:[O,R];if(l||yt(t[0],Se[e],Te[e]),!s){let l;al(t[1],(([t,n],s)=>{n!==t&&(Me(Ve[e],[s],n,t,vt),l=1)})),l&&Me(xe[e],void 0,vt)}}},kt=(e,...t)=>(wl((()=>e(...ee(t,S)))),Ol),xt=()=>vl(W),St=()=>ul(W),Tt=e=>ul(dl(H,S(e))),Vt=e=>Zt(dl(W,S(e))),Ot=e=>ul(dl(W,S(e))),Rt=(e,t,l,n=0,s)=>{return ee(j(Z((r=dl(W,S(e)),a=(e,l)=>[M(t)?l:dl(e,S(t)),l],ee([...null!=(o=null==r?void 0:r.entries())?o:[]],(([e,t])=>a(t,e)))),(([e],[t])=>{return((null!=(n=e)?n:0)<(null!=(s=t)?s:0)?-1:1)*(l?-1:1);var n,s})),n,M(s)?s:n+s),(([,e])=>e));var r,a,o},qt=(e,t)=>ul(dl(dl(W,S(e)),S(t))),Mt=(e,t,l)=>dl(dl(dl(W,S(e)),S(t)),S(l)),Pt=()=>bl(G),Nt=()=>ul(G),Lt=e=>dl(G,S(e)),Et=()=>!nl(W),jt=e=>ll(W,S(e)),zt=(e,t)=>ll(dl(H,S(e)),S(t)),$t=(e,t)=>ll(dl(W,S(e)),S(t)),At=(e,t,l)=>ll(dl(dl(W,S(e)),S(t)),S(l)),Jt=()=>!nl(G),Dt=e=>ll(G,S(e)),Bt=e=>kt((()=>(e=>ge(e,je,pt))(e)?We(e):0)),Ft=e=>kt((()=>Ae(e)?Ze(e):0)),Qt=e=>{try{He(fe(e))}catch(e){}return Ol},Ht=t=>kt((()=>{if((e=ge(t,(e=>ge(e,Le))))&&(Fe(t),!nl(W))){const e=xt();Gt(),Bt(e)}})),Wt=e=>kt((()=>{if(t=(e=>ge(e,Le))(e)){const l=Pt();sl(),Xt(),t=!0,Qe(e),Ft(l)}})),Gt=()=>kt((()=>We({}))),Kt=e=>kt((e=>ll(W,e)?st(e):0),e),Ut=(e,t)=>kt(((e,t)=>P(dl(W,e),(l=>ll(l,t)?rt(e,l,t):0))),e,t),Xt=()=>kt((()=>Ze({}))),Yt=()=>kt((()=>{Fe({}),e=!1})),sl=()=>kt((()=>{Qe({}),t=!1})),wl=(e,t)=>{if(-1!=s){xl();const l=e();return Vl(t),l}},xl=()=>{var e;return-1!=s&&s++,1==s&&(null==(e=r[0])||e.call(r),Me(Oe)),Ol},Vl=e=>{var t,a;return s>0&&(s--,0==s&&(s=1,ft(1),nl(V)||wt(1),It(1),nl(R)||Ct(1),(null==e?void 0:e(Ol))&&(al(V,((e,t)=>al(e,((e,l)=>al(e,(([e],n)=>tt(Ol,t,l,n,e))))))),rl(V),al(R,(([e],t)=>lt(Ol,t,e))),rl(R)),Me(Re[0],void 0),s=-1,ft(0),nl(V)||wt(0),It(0),nl(R)||Ct(0),null==(t=r[1])||t.call(r),Me(Re[1],void 0),null==(a=r[2])||a.call(r),s=0,l=Et(),n=Jt(),_([o,c,k,x,T,V,q,O,R,$],rl))),Ol},Ol={getContent:()=>[xt(),Pt()],getTables:xt,getTableIds:St,getTable:e=>gl(dl(W,S(e))),getTableCellIds:Tt,getRowCount:Vt,getRowIds:Ot,getSortedRowIds:Rt,getRow:(e,t)=>bl(dl(dl(W,S(e)),S(t))),getCellIds:qt,getCell:Mt,getValues:Pt,getValueIds:Nt,getValue:Lt,hasTables:Et,hasTable:jt,hasTableCell:zt,hasRow:$t,hasCell:At,hasValues:Jt,hasValue:Dt,getTablesJson:()=>Ie(W),getValuesJson:()=>Ie(G),getJson:()=>Ie([W,G]),getTablesSchemaJson:()=>Ie(A),getValuesSchemaJson:()=>Ie(D),getSchemaJson:()=>Ie([A,D]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>kt((()=>{const t=L(e)?e():e;Ee(t)&&(([e,t])=>{(be(e)?Gt:Bt)(e),(be(t)?Xt:Ft)(t)})(t)})),setTables:Bt,setTable:(e,t)=>kt((e=>je(t,e)?Ge(e,t):0),e),setRow:(e,t,l)=>kt(((e,t)=>ze(e,t,l)?Ke(e,nt(e),t,l):0),e,t),addRow:(e,t,l=!0)=>wl((()=>{let n;return ze(e,n,t)&&(e=S(e),Ke(e,nt(e),n=((e,t)=>{const[l]=dl(Q,e);let n;do{n=l(t)}while(ll(dl(W,e),n));return n})(e,l?1:0),t)),n})),setPartialRow:(e,t,l)=>kt(((e,t)=>{if(ze(e,t,l,1)){const n=nt(e);pe(l,((l,s)=>Xe(e,n,t,s,l)))}}),e,t),setCell:(e,t,l,n)=>kt(((e,t,l)=>P($e(e,t,l,L(n)?n(Mt(e,t,l)):n),(n=>Xe(e,nt(e),t,l,n)))),e,t,l),setValues:Ft,setPartialValues:e=>kt((()=>Ae(e,1)?pe(e,((e,t)=>_e(t,e))):0)),setValue:(e,t)=>kt((e=>P(Je(e,L(t)?t(Lt(e)):t),(t=>_e(e,t)))),e),applyChanges:e=>kt((()=>{pe(e[0],((e,t)=>M(e)?Kt(t):pe(e,((e,l)=>M(e)?Ut(t,l):pe(e,((e,n)=>tt(Ol,t,l,n,e))))))),pe(e[1],((e,t)=>lt(Ol,t,e)))})),setTablesJson:Qt,setValuesJson:e=>{try{Ye(fe(e))}catch(e){}return Ol},setJson:e=>kt((()=>{try{const[t,l]=fe(e);He(t),Ye(l)}catch(t){Qt(e)}})),setTablesSchema:Ht,setValuesSchema:Wt,setSchema:(e,t)=>kt((()=>{Ht(e),Wt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,l,n)=>kt(((e,t,l)=>P(dl(W,e),(s=>P(dl(s,t),(r=>ll(r,l)?at(e,s,t,r,l,n):0))))),e,t,l),delValues:Xt,delValue:e=>kt((e=>ll(G,e)?ot(e):0),e),delTablesSchema:Yt,delValuesSchema:sl,delSchema:()=>kt((()=>{Yt(),sl()})),transaction:wl,startTransaction:xl,getTransactionChanges:()=>[bl(V,((e,t)=>-1===dl(o,t)?void 0:bl(e,((e,l)=>-1===dl(dl(x,t),l)?void 0:bl(e,(([,e])=>e),(e=>Dl(e)))),nl,be)),nl,be),bl(R,(([,e])=>e),(e=>Dl(e))),1],getTransactionLog:()=>[!nl(V),!nl(R),vl(V,Jl,Dl),vl(q),bl(R,Jl,Dl),bl($),bl(o),gl(x),vl(T),bl(O)],finishTransaction:Vl,forEachTable:e=>al(W,((t,l)=>e(l,(e=>al(t,((t,l)=>e(l,(e=>cl(t,e))))))))),forEachTableCell:(e,t)=>cl(dl(H,S(e)),t),forEachRow:(e,t)=>al(dl(W,S(e)),((e,l)=>t(l,(t=>cl(e,t))))),forEachCell:(e,t,l)=>cl(dl(dl(W,S(e)),S(t)),l),forEachValue:e=>cl(G,e),addSortedRowIdsListener:(e,t,l,n,s,r,a)=>{let o=Rt(e,t,l,n,s);return qe((()=>{const a=Rt(e,t,l,n,s);var i,u,d;u=o,z(i=a)===z(u)&&(d=(e,t)=>u[t]===e,i.every(d))||(o=a,r(Ol,e,t,l,n,s,o))}),oe[a?1:0],[e,t],[St])},addStartTransactionListener:e=>qe(e,Oe),addWillFinishTransactionListener:e=>qe(e,Re[0]),addDidFinishTransactionListener:e=>qe(e,Re[1]),callListener:e=>(Ne(e),Ol),delListener:e=>(Pe(e),Ol),getListenerStats:()=>({hasTables:$l(K),tables:$l(U),tableIds:$l(X),hasTable:$l(Y),table:$l(te),tableCellIds:$l(ne),hasTableCell:$l(se,el),rowCount:$l(re),rowIds:$l(ae),sortedRowIds:$l(oe),hasRow:$l(ie,el),row:$l(ue,el),cellIds:$l(ce,el),hasCell:$l(ve,tl),cell:$l(ye,tl),invalidCell:$l(we,tl),hasValues:$l(ke),values:$l(xe),valueIds:$l(Se),hasValue:$l(Te),value:$l(Ve),invalidValue:$l(Ce),transaction:_t(Oe)+$l(Re)}),isMergeable:()=>!1,createStore:Fl,addListener:qe,callListeners:Me,setInternalListeners:(e,t,l,n,s)=>r=[e,t,l,n,s]};return pe({[d+m]:[0,K,[],()=>[Et()]],[m]:[0,U],[p]:[0,X],[d+h]:[1,Y,[St],e=>[jt(...e)]],[h]:[1,te,[St]],[h+I]:[1,ne,[St]],[d+h+f]:[2,se,[St,Tt],e=>[zt(...e)]],[g]:[1,re,[St]],[v]:[1,ae,[St]],[d+b]:[2,ie,[St,Ot],e=>[$t(...e)]],[b]:[2,ue,[St,Ot]],[I]:[2,ce,[St,Ot]],[d+f]:[3,ve,[St,Ot,qt],e=>[At(...e)]],[f]:[3,ye,[St,Ot,qt],e=>zl(Mt(...e))],InvalidCell:[3,we],[d+w]:[0,ke,[],()=>[Jt()]],[w]:[0,xe],[C]:[0,Se],[d+y]:[1,Te,[Nt],e=>[Dt(...e)]],[y]:[1,Ve,[Nt],e=>zl(Lt(e[0]))],InvalidValue:[1,Ce]},(([e,t,l,n],s)=>{Ol["add"+s+"Listener"]=(...s)=>qe(s[e],t[s[e+1]?1:0],e>0?j(s,0,e):void 0,l,n)})),de(Ol)};exports.Inspector=({position:e="right",open:l=!1})=>{const n=t.useCreateStore(Fl),s=Ce.indexOf(e);return t.useCreatePersister(n,(e=>{return t=ye,l=sessionStorage,((e,t,l,n,s,r,a,o={},i=0,u=[])=>{let d,c,h,m=0,p=0,b=0;ml(Nl,u,(()=>0)),ml(Ll,u,(()=>[]));const g=il(),[v,f,I,y,w]=((e=1,t,l)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!l),([[e],[t]])=>!be(e)||!be(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!be(e)||!be(t),t.setContent]:$("Store type not supported by this Persister"))(a,e,i),[C,k,x]=Tl((()=>N)),S=e=>{e!=m&&(m=e,k(g,void 0,m))},T=t=>{(v&&E(null==t?void 0:t[0])?1===(null==t?void 0:t[2])?e.applyMergeableChanges:e.setMergeableContent:1===(null==t?void 0:t[2])?e.applyChanges:e.setContent)(t)},V=e=>Pl(void 0,null,(function*(){return 2!=m&&(S(1),p++,yield P((()=>Pl(void 0,null,(function*(){try{const l=yield t();E(l)?T(l):e?w(e):$("Content is not an array: "+l)}catch(t){e&&w(e)}S(0)}))))),N})),O=()=>(c&&(s(c),c=void 0),N),R=e=>Pl(void 0,null,(function*(){return 1!=m&&(S(2),b++,yield P((()=>Pl(void 0,null,(function*(){try{yield l(f,e)}catch(e){}S(0)}))))),N})),q=()=>(h&&(e.delListener(h),h=void 0),N),P=(...e)=>Pl(void 0,null,(function*(){return le(dl(Ll,u),...e),yield Pl(void 0,null,(function*(){if(!dl(Nl,u)){for(hl(Nl,u,1);!M(d=ne(dl(Ll,u)));)try{yield d()}catch(e){}hl(Nl,u,0)}})),N})),N=((e,t)=>{for(var l in t||(t={}))Rl.call(t,l)&&Ml(e,l,t[l]);if(Ol)for(var l of Ol(t))ql.call(t,l)&&Ml(e,l,t[l]);return e})({load:V,startAutoLoad:e=>Pl(void 0,null,(function*(){O(),yield V(e);try{c=yield n(((e,t)=>Pl(void 0,null,(function*(){t||e?2!=m&&(S(1),p++,T(null!=t?t:e),S(0)):yield V()}))))}catch(e){}return N})),stopAutoLoad:O,isAutoLoading:()=>!M(c),save:R,startAutoSave:()=>Pl(void 0,null,(function*(){return q(),yield R(),h=e.addDidFinishTransactionListener((()=>{const e=I();y(e)&&R(e)})),N})),stopAutoSave:q,isAutoSaving:()=>!M(h),getStatus:()=>m,addStatusListener:e=>C(e,g),delListener:t=>(x(t),e),schedule:P,getStore:()=>e,destroy:()=>(dl(Ll,u).splice(0,void 0),O().stopAutoSave()),getStats:()=>({loads:p,saves:b})},o);return de(N)})(e,(()=>El(void 0,null,(function*(){return e=l.getItem(t),fe(e,((e,t)=>"￼"===t?void 0:t));var e}))),(e=>El(void 0,null,(function*(){return l.setItem(t,(n=e(),ve(n,((e,t)=>void 0===t?"￼":t))));var n}))),(e=>{const n=n=>{if(n.storageArea===l&&n.key===t)try{e(fe(n.newValue))}catch(t){e()}};return T.addEventListener(jl,n),n}),(e=>T.removeEventListener(jl,e)),0,3,{getStorageName:()=>t});var t,l}),void 0,(e=>{return t=function*(){yield e.load([{},{position:-1==s?1:s,open:!!l}]),yield e.startAutoSave()},new Promise(((e,l)=>{var n=e=>{try{r(t.next(e))}catch(e){l(e)}},s=e=>{try{r(t.throw(e))}catch(e){l(e)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);r((t=t.apply(void 0,null)).next())}));var t})),B(J,null,B("aside",{id:ye},B(Ze,{s:n}),B(Xt,{s:n})),B("style",null,Ye))};
