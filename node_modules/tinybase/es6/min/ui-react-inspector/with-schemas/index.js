import e from"react";import{useCell as t,useValue as l,useSetValueCallback as n,useSetCellCallback as r,useValueIds as o,ValueView as s,useStoreOrStoreById as a,useRowCount as i,useSortedRowIds as d,useTableCellIds as u,useIndexesOrIndexesById as c,useSliceRowIds as h,useRelationshipsOrRelationshipsById as m,useRowIds as p,useResultRowCount as g,useResultSortedRowIds as b,useResultTableCellIds as v,useRemoteRowId as f,CellView as y,ResultCellView as I,useIndexes as w,useIndexIds as C,useSliceIds as k,useMetrics as x,useMetricIds as T,useMetric as S,useQueries as O,useQueryIds as q,useRelationships as P,useRelationshipIds as N,useStore as V,useTableIds as L,useValues as M,useStoreIds as E,useMetricsIds as R,useIndexesIds as j,useRelationshipsIds as z,useQueriesIds as $,useCreateStore as A,useCreatePersister as J}from"../../ui-react/with-schemas/index.js";const D=e=>typeof e,F="",B=D(F),H=D(!0),W=D(0),Q=D(D),G="type",K="default",U="Has",X="Ids",Y="Table",Z=Y+"s",_=Y+X,ee="Row",te=ee+"Count",le=ee+X,ne="Cell",re=ne+X,oe="Value",se=oe+"s",ae=oe+X,ie="currentTarget",de="value",ue=e=>F+e,ce=globalThis.window,he=Math,me=he.min,pe=he.floor,ge=isFinite,be=e=>null==e,ve=(e,t,l)=>be(e)?null==l?void 0:l():t(e),fe=e=>e==B||e==H,ye=e=>D(e)==Q,Ie=e=>Array.isArray(e),we=(e,t,l)=>e.slice(t,l),Ce=e=>e.length,ke=e=>{throw Error(e)},{PureComponent:xe,Fragment:Te,createContext:Se,createElement:Oe,useCallback:qe,useContext:Pe,useEffect:Ne,useLayoutEffect:Ve,useMemo:Le,useRef:Me,useState:Ee,useSyncExternalStore:Re}=e,je=(e,...t)=>be(e)?{}:e(...t),ze=(e,t)=>e.sort(t),$e=(e,t)=>e.forEach(t),Ae=(e,t)=>e.map(t),Je=e=>0==Ce(e),De=(e,...t)=>e.push(...t),Fe=e=>e.shift(),Be=Object,He=e=>Be.getPrototypeOf(e),We=Be.entries,Qe=Be.isFrozen,Ge=e=>!be(e)&&ve(He(e),(e=>e==Be.prototype||be(He(e))),(()=>!0)),Ke=Be.keys,Ue=Be.freeze,Xe=(e=[])=>Be.fromEntries(e),Ye=(e,t)=>t in e,Ze=(e,t)=>(delete e[t],e),_e=(e,t)=>Ae(We(e),(([e,l])=>t(l,e))),et=e=>Ge(e)&&0==(e=>Ce(Ke(e)))(e),tt=(e,t,l,n=0)=>be(e)||!Ge(e)||!n&&et(e)||Qe(e)?(null==l||l(),!1):(_e(e,((l,n)=>{t(l,n)||Ze(e,n)})),!!n||!et(e)),lt=JSON.stringify,nt=JSON.parse,rt=e=>lt(e,((e,t)=>t instanceof Map?Be.fromEntries([...t]):t)),ot="tinybaseInspector",st="TinyBase Inspector",at=["left","top","bottom","right","full"],it="state",dt="sort",ut="open",ct="position",ht=ut,mt="editable",pt=(...e)=>rt(e),gt=(e,t)=>Ae(ze([...e]),t),bt=(e,l)=>[!!t(it,e,mt,l),qe((t=>{l.setCell(it,e,mt,(e=>!e)),t.preventDefault()}),[l,e])],vt="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",ft='content:url("',yt=ft+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",It='</svg>")',wt=ft+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",Ct=Ae([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,l,n])=>yt+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${l}' height='${n}' fill='white'/>`+It)),kt=yt+"<path d='M20 20l60 60M20 80l60-60' />"+It,xt=yt+`<path d='${vt}' />`+It,Tt=yt+`<path d='${vt}M20 20l60 60' />`+It;var St=Object.defineProperty,Ot=Object.defineProperties,qt=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Lt=(e,t,l)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Mt=(e,t)=>{for(var l in t||(t={}))Nt.call(t,l)&&Lt(e,l,t[l]);if(Pt)for(var l of Pt(t))Vt.call(t,l)&&Lt(e,l,t[l]);return e},Et=(e,t)=>Ot(e,qt(t));const Rt="*::-webkit-scrollbar",jt=((e,t="")=>e.join(t))(_e(Et(Mt(Et(Mt(Et(Mt({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[Rt]:"width:0.5rem;height:0.5rem;",[Rt+"-track"]:"background:#111",[Rt+"-thumb"]:"background:#999;border:1px solid #111",[Rt+"-thumb:hover"]:"background:#fff",[Rt+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+wt},Xe(Ae(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e])))),{main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;"}),Xe(Ae(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e])))),{header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":wt,"header>img:nth-of-type(6)":kt}),Xe(Ae(Ct,((e,t)=>[`header>img[data-id='${t}']`,e])))),{"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":xt,"details[open]>summary img.done":Tt,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${ot} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"}),((e,t)=>e?`#${ot} ${t}{${e}}`:""))),zt=({s:e})=>{var t;const r=null!=(t=l(ct,e))?t:1,o=n(ht,(()=>!0),[],e);return l(ht,e)?null:Oe("img",{onClick:o,title:st,"data-position":r})},$t=({uniqueId:e,summary:l,editable:n,handleEditable:o,children:s,s:a})=>{const i=!!t(it,e,ut,a),d=r(it,e,ut,(e=>e[ie].open),[],a);return Oe("details",{open:i,onToggle:d},Oe("summary",null,l,o?Oe("img",{onClick:o,className:n?"done":"edit"}):null),s)},At=e=>{const t=D(e);return fe(t)||t==W&&ge(e)?t:void 0},Jt=(e,t,l,n,r)=>be(r)?e.delCell(t,l,n,!0):e.setCell(t,l,n,r),Dt=(e,t,l)=>be(l)?e.delValue(t):e.setValue(t,l),Ft=(e,t,l,n)=>e==B?t:e==W?l:n;var Bt=Object.defineProperty,Ht=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ut=(e,t,l)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Xt=(e,t)=>{for(var l in t||(t={}))Gt.call(t,l)&&Ut(e,l,t[l]);if(Qt)for(var l of Qt(t))Kt.call(t,l)&&Ut(e,l,t[l]);return e},Yt=(e,t)=>Ht(e,Wt(t)),Zt=(e,t)=>{var l={};for(var n in e)Gt.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&Qt)for(var n of Qt(e))t.indexOf(n)<0&&Kt.call(e,n)&&(l[n]=e[n]);return l};const _t="editable",el=(e,t)=>Ae(u(e,t),(t=>e+"."+t)),tl=(e,t,l)=>{const n=qe(e,t);return l?n:void 0},ll=(...e)=>Le((()=>e),e),nl=(e,t)=>Le((()=>({store:e,tableId:t})),[e,t]),rl=(e,t)=>Le((()=>({queries:e,queryId:t})),[e,t]),ol=(e,t=!1,l,n=0,r,o,s,a)=>{const[[i,d,u],c]=Ee([e,t,n]),h=qe((e=>{c(e),null==a||a(e)}),[a]),m=tl((e=>h([e,e==i&&!d,u])),[h,i,d,u],l),p=qe((e=>h([i,d,e])),[h,i,d]),g=!0===s?fl:s;return[[i,d,u],m,Le((()=>!1===s?null:Oe(g,{offset:u,limit:r,total:o,onChange:p})),[s,g,u,r,o,p])]},sl=(e,t,l)=>Le((()=>{const n=null!=t?t:e;return r=Ie(n)?Xe(Ae(n,(e=>[e,e]))):n,o=(e,t)=>Xt(Xt({},{label:t,component:l}),D(e)==B?{label:e}:e),Xe(_e(r,((e,t)=>[t,o(e,t)])));var r,o}),[t,l,e]),al=({className:e,headerRow:t,idColumn:l,params:[n,r,o,s,a,i]})=>Oe("table",{className:e},i?Oe("caption",null,i):null,!1===t?null:Oe("thead",null,Oe("tr",null,!1===l?null:Oe(il,{sort:null!=s?s:[],label:"Id",onClick:a}),_e(n,(({label:e},t)=>Oe(il,{key:t,cellId:t,label:e,sort:null!=s?s:[],onClick:a}))))),Oe("tbody",null,Ae(o,(e=>Oe("tr",{key:e},!1===l?null:Oe("th",null,e),_e(n,(({component:t,getComponentProps:l},n)=>Oe("td",{key:n},Oe(t,Yt(Xt(Xt({},je(l,e,n)),r),{rowId:e,cellId:n})))))))))),il=({cellId:e,sort:[t,l],label:n=(null!=e?e:F),onClick:r})=>Oe("th",{onClick:tl((()=>null==r?void 0:r(e)),[r,e],r),className:be(l)||t!=e?void 0:`sorted ${l?"de":"a"}scending`},be(l)||t!=e?null:(l?"↓":"↑")+" ",n),dl=({localRowId:e,params:[t,l,n,r,o,s,a]})=>{const i=f(o,e,s);return Oe("tr",null,!1===t?null:Oe(Te,null,Oe("th",null,e),Oe("th",null,i)),_e(l,(({component:t,getComponentProps:l},o)=>{const[s,d]=((e,t="",l)=>e.split(t,l))(o,".",2),u=s===n?e:s===r?i:null;return be(u)?null:Oe("td",{key:o},Oe(t,Yt(Xt({},je(l,u,d)),{store:a,tableId:s,rowId:u,cellId:d})))})))},ul=({thing:e,onThingChange:t,className:l,hasSchema:n,showType:r=!0})=>{const[o,s]=Ee(),[a,i]=Ee(),[d,u]=Ee(),[c,h]=Ee(),[m,p]=Ee();a!==e&&(s(At(e)),i(e),u(e+""),h(Number(e)||0),p(!!e));const g=qe(((e,l)=>{l(e),i(e),t(e)}),[t]),b=qe((()=>{if(!(null==n?void 0:n())){const e=Ft(o,W,H,B),l=Ft(e,d,c,m);s(e),i(l),t(l)}}),[n,t,d,c,m,o]);return Oe("div",{className:l},r?Oe("button",{className:o,onClick:b},o):null,Ft(o,Oe("input",{key:o,value:d,onChange:qe((e=>g(e[ie][de]+"",u)),[g])}),Oe("input",{key:o,type:"number",value:c,onChange:qe((e=>g(Number(e[ie][de]||0),h)),[g])}),Oe("input",{key:o,type:"checkbox",checked:m,onChange:qe((e=>g(!!e[ie].checked,p)),[g])})))},cl=e=>{var t=e,{tableId:l,cellId:n,descending:r,offset:o,limit:s,store:a,editable:c,sortOnClick:h,paginator:m=!1,onChange:p,customCells:g}=t,b=Zt(t,["tableId","cellId","descending","offset","limit","store","editable","sortOnClick","paginator","onChange","customCells"]);const[v,f,I]=ol(n,r,h,o,s,i(l,a),m,p);return Oe(al,Yt(Xt({},b),{params:ll(sl(u(l,a),g,c?bl:y),nl(a,l),d(l,...v,s,a),v,f,I)}))},hl=({store:e,editable:t=!1,valueComponent:l=(t?vl:s),getValueComponentProps:n,className:r,headerRow:a,idColumn:i})=>Oe("table",{className:r},!1===a?null:Oe("thead",null,Oe("tr",null,!1===i?null:Oe("th",null,"Id"),Oe("th",null,oe))),Oe("tbody",null,Ae(o(e),(t=>Oe("tr",{key:t},!1===i?null:Oe("th",null,t),Oe("td",null,Oe(l,Yt(Xt({},je(n,t)),{valueId:t,store:e})))))))),ml=e=>{var t=e,{indexId:l,sliceId:n,indexes:r,editable:o,customCells:s}=t,a=Zt(t,["indexId","sliceId","indexes","editable","customCells"]);const[i,d,m]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getTableId(t)])(c(r),l);return Oe(al,Yt(Xt({},a),{params:ll(sl(u(m,d),s,o?bl:y),nl(d,m),h(l,n,i))}))},pl=({relationshipId:e,relationships:t,editable:l,customCells:n,className:r,headerRow:o,idColumn:s=!0})=>{const[a,i,d,u]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getLocalTableId(t),null==e?void 0:e.getRemoteTableId(t)])(m(t),e),c=sl([...el(d,i),...el(u,i)],n,l?bl:y),h=ll(s,c,d,u,e,a,i);return Oe("table",{className:r},!1===o?null:Oe("thead",null,Oe("tr",null,!1===s?null:Oe(Te,null,Oe("th",null,d,".Id"),Oe("th",null,u,".Id")),_e(c,(({label:e},t)=>Oe("th",{key:t},e))))),Oe("tbody",null,Ae(p(d,i),(e=>Oe(dl,{key:e,localRowId:e,params:h})))))},gl=e=>{var t=e,{queryId:l,cellId:n,descending:r,offset:o,limit:s,queries:a,sortOnClick:i,paginator:d=!1,customCells:u,onChange:c}=t,h=Zt(t,["queryId","cellId","descending","offset","limit","queries","sortOnClick","paginator","customCells","onChange"]);const[m,p,f]=ol(n,r,i,o,s,g(l,a),d,c);return Oe(al,Yt(Xt({},h),{params:ll(sl(v(l,a),u,I),rl(a,l),b(l,...m,s,a),m,p,f)}))},bl=({tableId:e,rowId:l,cellId:n,store:o,className:s,showType:i})=>{var d;return Oe(ul,{thing:t(e,l,n,o),onThingChange:r(e,l,n,(e=>e),[],o),className:null!=s?s:_t+ne,showType:i,hasSchema:null==(d=a(o))?void 0:d.hasTablesSchema})},vl=({valueId:e,store:t,className:r,showType:o})=>{var s;return Oe(ul,{thing:l(e,t),onThingChange:n(e,(e=>e),[],t),className:null!=r?r:_t+oe,showType:o,hasSchema:null==(s=a(t))?void 0:s.hasValuesSchema})},fl=({onChange:e,total:t,offset:l=0,limit:n=t,singular:r="row",plural:o=r+"s"})=>{(l>t||l<0)&&(l=0,e(0));const s=tl((()=>e(l-n)),[e,l,n],l>0),a=tl((()=>e(l+n)),[e,l,n],l+n<t);return Oe(Te,null,t>n&&Oe(Te,null,Oe("button",{className:"previous",disabled:0==l,onClick:s},"←"),Oe("button",{className:"next",disabled:l+n>=t,onClick:a},"→"),l+1," to ",me(t,l+n)," of "),t," ",1!=t?o:r)},yl=({indexes:e,indexesId:t,indexId:l,s:n})=>Oe($t,{uniqueId:pt("i",t,l),summary:"Index: "+l,s:n},Ae(k(l,e),(r=>Oe(Il,{indexes:e,indexesId:t,indexId:l,sliceId:r,s:n,key:r})))),Il=({indexes:e,indexesId:t,indexId:l,sliceId:n,s:r})=>{const o=pt("i",t,l,n),[s,a]=bt(o,r);return Oe($t,{uniqueId:o,summary:"Slice: "+n,editable:s,handleEditable:a,s:r},Oe(ml,{sliceId:n,indexId:l,indexes:e,editable:s}))},wl=({indexesId:e,s:t})=>{const l=w(e),n=C(l);return be(l)?null:Oe($t,{uniqueId:pt("i",e),summary:"Indexes: "+(null!=e?e:K),s:t},Je(n)?"No indexes defined":gt(n,(n=>Oe(yl,{indexes:l,indexesId:e,indexId:n,s:t,key:n}))))},Cl=({metrics:e,metricId:t})=>Oe("tr",null,Oe("th",null,t),Oe("td",null,null==e?void 0:e.getTableId(t)),Oe("td",null,S(t,e))),kl=({metricsId:e,s:t})=>{const l=x(e),n=T(l);return be(l)?null:Oe($t,{uniqueId:pt("m",e),summary:"Metrics: "+(null!=e?e:K),s:t},Je(n)?"No metrics defined":Oe("table",null,Oe("thead",null,Oe("th",null,"Metric Id"),Oe("th",null,"Table Id"),Oe("th",null,"Metric")),Oe("tbody",null,Ae(n,(e=>Oe(Cl,{metrics:l,metricId:e,key:e}))))))},xl=({queries:e,queriesId:l,queryId:n,s:o})=>{var s;const a=pt("q",l,n),[i,d,u]=nt(null!=(s=t(it,a,dt,o))?s:"[]"),c=r(it,a,dt,rt,[],o);return Oe($t,{uniqueId:a,summary:"Query: "+n,s:o},Oe(gl,{queryId:n,queries:e,cellId:i,descending:d,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:c}))},Tl=({queriesId:e,s:t})=>{const l=O(e),n=q(l);return be(l)?null:Oe($t,{uniqueId:pt("q",e),summary:"Queries: "+(null!=e?e:K),s:t},Je(n)?"No queries defined":gt(n,(n=>Oe(xl,{queries:l,queriesId:e,queryId:n,s:t,key:n}))))},Sl=({relationships:e,relationshipsId:t,relationshipId:l,s:n})=>{const r=pt("r",t,l),[o,s]=bt(r,n);return Oe($t,{uniqueId:r,summary:"Relationship: "+l,editable:o,handleEditable:s,s:n},Oe(pl,{relationshipId:l,relationships:e,editable:o}))},Ol=({relationshipsId:e,s:t})=>{const l=P(e),n=N(l);return be(l)?null:Oe($t,{uniqueId:pt("r",e),summary:"Relationships: "+(null!=e?e:K),s:t},Je(n)?"No relationships defined":gt(n,(n=>Oe(Sl,{relationships:l,relationshipsId:e,relationshipId:n,s:t,key:n}))))},ql=({tableId:e,store:l,storeId:n,s:o})=>{var s;const a=pt("t",n,e),[i,d,u]=nt(null!=(s=t(it,a,dt,o))?s:"[]"),c=r(it,a,dt,rt,[],o),[h,m]=bt(a,o);return Oe($t,{uniqueId:a,summary:Y+": "+e,editable:h,handleEditable:m,s:o},Oe(cl,{tableId:e,store:l,cellId:i,descending:d,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:c,editable:h}))},Pl=({store:e,storeId:t,s:l})=>{const n=pt("v",t),[r,s]=bt(n,l);return Je(o(e))?null:Oe($t,{uniqueId:n,summary:se,editable:r,handleEditable:s,s:l},Oe(hl,{store:e,editable:r}))},Nl=({storeId:e,s:t})=>{const l=V(e),n=L(l);return be(l)?null:Oe($t,{uniqueId:pt("s",e),summary:(l.isMergeable()?"Mergeable":"")+"Store: "+(null!=e?e:K),s:t},Oe(Pl,{storeId:e,store:l,s:t}),gt(n,(n=>Oe(ql,{store:l,storeId:e,tableId:n,s:t,key:n}))))},Vl=({s:e})=>{const t=Me(null),l=Me(0),[n,r]=Ee(!1),{scrollLeft:o,scrollTop:s}=M(e);Ve((()=>{const e=t.current;if(e&&!n){const t=new MutationObserver((()=>{e.scrollWidth>=pe(o)+e.clientWidth&&e.scrollHeight>=pe(s)+e.clientHeight&&e.scrollTo(o,s)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[n,o,s]);const a=qe((t=>{const{scrollLeft:n,scrollTop:o}=t[ie];cancelIdleCallback(l.current),l.current=requestIdleCallback((()=>{r(!0),e.setPartialValues({scrollLeft:n,scrollTop:o})}))}),[e]),i=V(),d=E(),u=x(),c=R(),h=w(),m=j(),p=P(),g=z(),b=O(),v=$();return be(i)&&Je(d)&&be(u)&&Je(c)&&be(h)&&Je(m)&&be(p)&&Je(g)&&be(b)&&Je(v)?Oe("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):Oe("article",{ref:t,onScroll:a},Oe(Nl,{s:e}),Ae(d,(t=>Oe(Nl,{storeId:t,s:e,key:t}))),Oe(kl,{s:e}),Ae(c,(t=>Oe(kl,{metricsId:t,s:e,key:t}))),Oe(wl,{s:e}),Ae(m,(t=>Oe(wl,{indexesId:t,s:e,key:t}))),Oe(Ol,{s:e}),Ae(g,(t=>Oe(Ol,{relationshipsId:t,s:e,key:t}))),Oe(Tl,{s:e}),Ae(v,(t=>Oe(Tl,{queriesId:t,s:e,key:t}))))};var Ll=Object.defineProperty;class Ml extends xe{constructor(e){var t,l,n;super(e),n=(e,t)=>console.error(e,t.componentStack),(l="componentDidCatch")in(t=this)?Ll(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?Oe("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const El=({s:e})=>{var t;const r=null!=(t=l(ct,e))?t:1,o=n(ht,(()=>!1),[],e),s=n(ct,(e=>Number(e[ie].dataset.id)),[],e);return Oe("header",null,Oe("img",{title:st}),Oe("span",null,st),Ae(at,((e,t)=>t==r?null:Oe("img",{onClick:s,"data-id":t,title:"Dock to "+e,key:t}))),Oe("img",{onClick:o,title:"Close"}))},Rl=({s:e})=>{var t;const n=null!=(t=l(ct,e))?t:1;return l(ht,e)?Oe("main",{"data-position":n},Oe(El,{s:e}),Oe(Ml,null,Oe(Vl,{s:e}))):null},jl=e=>t=>{return l=(t,l)=>t+e(l),Bl(t).reduce(l,0);var l},zl=e=>{var t;return null!=(t=null==e?void 0:e.size)?t:0},$l=jl(zl),Al=jl($l),Jl=jl(Al),Dl=(e,t)=>{var l;return null!=(l=null==e?void 0:e.has(t))&&l},Fl=e=>be(e)||0==zl(e),Bl=e=>{var t;return[...null!=(t=null==e?void 0:e.values())?t:[]]},Hl=e=>e.clear(),Wl=(e,t)=>null==e?void 0:e.forEach(t),Ql=(e,t)=>null==e?void 0:e.delete(t),Gl=e=>new Map(e),Kl=e=>{var t;return[...null!=(t=null==e?void 0:e.keys())?t:[]]},Ul=(e,t)=>null==e?void 0:e.get(t),Xl=(e,t)=>Wl(e,((e,l)=>t(l,e))),Yl=(e,t,l)=>be(l)?(Ql(e,t),e):null==e?void 0:e.set(t,l),Zl=(e,t,l,n)=>(Dl(e,t)?null==n||n(Ul(e,t)):Yl(e,t,l()),Ul(e,t)),_l=(e,t,l,n=Yl)=>(_e(t,((t,n)=>l(e,n,t))),Xl(e,(l=>Ye(t,l)?0:n(e,l))),e),en=(e,t,l,n)=>{const r={};return Wl(e,((e,o)=>{if(!(null==l?void 0:l(e,o))){const l=t?t(e,o):e;(null==n?void 0:n(l))||(r[o]=l)}})),r},tn=(e,t,l)=>en(e,(e=>en(e,t,l)),Fl,et),ln=(e,t,l)=>en(e,(e=>tn(e,t,l)),Fl,et),nn=(e,t)=>{const l=Gl();return Wl(e,((e,n)=>{var r;return l.set(n,null!=(r=null==t?void 0:t(e))?r:e)})),l},rn=e=>nn(e,nn),on=e=>nn(e,rn),sn=(e,t,l,n,r=0)=>ve((l?Zl:Ul)(e,t[r],r>Ce(t)-2?l:Gl),(o=>{if(r>Ce(t)-2)return(null==n?void 0:n(o))&&Yl(e,t[r]),o;const s=sn(o,t,l,n,r+1);return Fl(o)&&Yl(e,t[r]),s})),an=e=>new Set(Ie(e)||be(e)?e:[e]),dn=(e,t)=>null==e?void 0:e.add(t),un=/^\d+$/,cn=()=>{const e=[];let t=0;return[l=>{var n;return null!=(n=l?Fe(e):null)?n:F+t++},t=>{un.test(t)&&Ce(e)<1e3&&De(e,t)}]},hn=e=>{let t;const[l,n]=cn(),r=Gl();return[(n,o,s,a=[],i=()=>[])=>{null!=t||(t=e());const d=l(1);return Yl(r,d,[n,o,s,a,i]),dn(sn(o,null!=s?s:[F],an),d),d},(e,l,...n)=>$e(((e,t=[F])=>{const l=[],n=(e,r)=>r==Ce(t)?De(l,e):null===t[r]?Wl(e,(e=>n(e,r+1))):$e([t[r],null],(t=>n(Ul(e,t),r+1)));return n(e,0),l})(e,l),(e=>Wl(e,(e=>Ul(r,e)[0](t,...null!=l?l:[],...n))))),e=>ve(Ul(r,e),(([,t,l])=>(sn(t,null!=l?l:[F],void 0,(t=>(Ql(t,e),Fl(t)?1:0))),Yl(r,e),n(e),l))),e=>ve(Ul(r,e),(([e,,l=[],n,r])=>{const o=(...s)=>{var a,i;const d=Ce(s);d==Ce(l)?e(t,...s,...r(s)):be(l[d])?$e(null!=(i=null==(a=n[d])?void 0:a.call(n,...s))?i:[],(e=>o(...s,e))):o(...s,l[d])};o()}))]};var mn=Object.defineProperty,pn=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,vn=(e,t,l)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,fn=(e,t,l)=>new Promise(((n,r)=>{var o=e=>{try{a(l.next(e))}catch(e){r(e)}},s=e=>{try{a(l.throw(e))}catch(e){r(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((l=l.apply(e,t)).next())}));const yn=Gl(),In=Gl();var wn=(e,t,l)=>new Promise(((n,r)=>{var o=e=>{try{a(l.next(e))}catch(e){r(e)}},s=e=>{try{a(l.throw(e))}catch(e){r(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((l=l.apply(e,t)).next())}));const Cn="storage",kn=e=>[e,e],xn=(e,t=$l)=>t(e[0])+t(e[1]),Tn=()=>[Gl(),Gl()],Sn=e=>[...e],On=([e,t])=>e===t,qn=(e,t,l)=>Yl(e,t,Ul(e,t)==-l?void 0:l),Pn=()=>{let e,t,l=!1,n=!1,r=0,o=[];const s=Gl(),a=Gl(),i=Gl(),d=Gl(),u=Gl(),c=Gl(),h=Gl(),m=Gl(),p=Gl(),g=Gl(),b=Gl(),v=Gl(),f=Gl(),y=Gl(),I=an(),w=Gl(),C=Gl(),k=Gl(),x=Gl(),T=Tn(),S=Tn(),O=Tn(),q=Tn(),P=Tn(),N=Tn(),V=Tn(),L=Tn(),M=Tn(),E=Tn(),R=Tn(),j=Tn(),z=Tn(),$=Tn(),A=Tn(),J=Tn(),D=Tn(),F=Tn(),B=Tn(),H=Tn(),Q=Tn(),X=Tn(),ie=Gl(),de=Tn(),[ce,he,me,pe]=hn((()=>ll)),ge=e=>{if(!tt(e,((e,t)=>[G,K].includes(t))))return!1;const t=e[G];return!(!fe(t)&&t!=W||(At(e[K])!=t&&Ze(e,K),0))},ke=Ie,xe=(t,l)=>(!e||Dl(b,l)||ct(l))&&tt(t,((e,t)=>Te(l,t,e)),(()=>ct(l))),Te=(e,t,l,n)=>tt(n?l:Pe(l,e,t),((n,r)=>ve(Se(e,t,r,n),(e=>(l[r]=e,!0)),(()=>!1))),(()=>ct(e,t))),Se=(t,l,n,r)=>e?ve(Ul(Ul(b,t),n),(e=>At(r)!=e[G]?ct(t,l,n,r,e[K]):r),(()=>ct(t,l,n,r))):be(At(r))?ct(t,l,n,r):r,Oe=(e,t)=>tt(t?e:Ne(e),((t,l)=>ve(qe(l,t),(t=>(e[l]=t,!0)),(()=>!1))),(()=>ht())),qe=(e,l)=>t?ve(Ul(f,e),(t=>At(l)!=t[G]?ht(e,l,t[K]):l),(()=>ht(e,l))):be(At(l))?ht(e,l):l,Pe=(e,t,l)=>(ve(Ul(v,t),(([n,r])=>{Wl(n,((t,l)=>{Ye(e,l)||(e[l]=t)})),Wl(r,(n=>{Ye(e,n)||ct(t,l,n)}))})),e),Ne=e=>(t&&(Wl(y,((t,l)=>{Ye(e,l)||(e[l]=t)})),Wl(I,(t=>{Ye(e,t)||ht(t)}))),e),Ve=e=>_l(b,e,((e,t,l)=>{const n=Gl(),r=an();_l(Zl(b,t,Gl),l,((e,t,l)=>{Yl(e,t,l),ve(l[K],(e=>Yl(n,t,e)),(()=>dn(r,t)))})),Yl(v,t,[n,r])}),((e,t)=>{Yl(b,t),Yl(v,t)})),Le=e=>_l(f,e,((e,t,l)=>{Yl(f,t,l),ve(l[K],(e=>Yl(y,t,e)),(()=>dn(I,t)))}),((e,t)=>{Yl(f,t),Yl(y,t),Ql(I,t)})),Me=e=>et(e)?Gt():Ft(e),Ee=e=>_l(k,e,((e,t,l)=>Re(t,l)),((e,t)=>Ge(t))),Re=(e,t)=>_l(Zl(k,e,(()=>(ot(e,1),Yl(w,e,cn()),Yl(C,e,Gl()),Gl()))),t,((t,l,n)=>je(e,t,l,n)),((t,l)=>Ke(e,t,l))),je=(e,t,l,n,r)=>_l(Zl(t,l,(()=>(st(e,l,1),Gl()))),n,((t,n,r)=>Je(e,l,t,n,r)),((n,o)=>Xe(e,t,l,n,o,r))),Je=(e,t,l,n,r)=>{Dl(l,n)||at(e,t,n,1);const o=Ul(l,n);r!==o&&(it(e,t,n,o,r),Yl(l,n,r))},Fe=(e,t,l,n,r)=>ve(Ul(t,l),(t=>Je(e,l,t,n,r)),(()=>je(e,t,l,Pe({[n]:r},e,l)))),Be=e=>et(e)?Xt():Bt(e),He=e=>_l(x,e,((e,t,l)=>We(t,l)),((e,t)=>lt(t))),We=(e,t)=>{Dl(x,e)||dt(e,1);const l=Ul(x,e);t!==l&&(ut(e,l,t),Yl(x,e,t))},Qe=e=>{var t;return null!=(t=Ul(k,e))?t:Re(e,{})},Ge=e=>Re(e,{}),Ke=(e,t,l)=>{const[,n]=Ul(w,e);n(l),je(e,t,l,{},!0)},Xe=(e,t,l,n,r,o)=>{var s;const a=Ul(null==(s=Ul(v,e))?void 0:s[0],r);if(!be(a)&&!o)return Je(e,l,n,r,a);const i=t=>{it(e,l,t,Ul(n,t)),at(e,l,t,-1),Yl(n,t)};be(a)?i(r):Xl(n,i),Fl(n)&&(st(e,l,-1),Fl(Yl(t,l))&&(ot(e,-1),Yl(k,e),Yl(w,e),Yl(C,e)))},lt=e=>{const t=Ul(y,e);if(!be(t))return We(e,t);ut(e,Ul(x,e)),dt(e,-1),Yl(x,e)},ot=(e,t)=>qn(s,e,t),st=(e,t,l)=>qn(Zl(d,e,Gl),t,l)&&Yl(i,e,Zl(i,e,(()=>0))+l),at=(e,t,l,n)=>{var r;const o=Ul(C,e),s=null!=(r=Ul(o,l))?r:0;(0==s&&1==n||1==s&&-1==n)&&qn(Zl(a,e,Gl),l,n),Yl(o,l,s!=-n?s+n:null),qn(Zl(Zl(u,e,Gl),t,Gl),l,n)},it=(e,t,l,n,r)=>{var s;Zl(Zl(Zl(c,e,Gl),t,Gl),l,(()=>[n,0]))[1]=r,null==(s=o[3])||s.call(o,e,t,l,r)},dt=(e,t)=>qn(h,e,t),ut=(e,t,l)=>{var n;Zl(m,e,(()=>[t,0]))[1]=l,null==(n=o[4])||n.call(o,e,l)},ct=(e,t,l,n,r)=>(De(Zl(Zl(Zl(p,e,Gl),t,Gl),l,(()=>[])),n),r),ht=(e,t,l)=>(De(Zl(g,e,(()=>[])),t),l),mt=(e,t,l)=>ve(Ul(Ul(Ul(c,e),t),l),(([e,t])=>[!0,e,t]),(()=>[!1,...kn(qt(e,t,l))])),pt=e=>ve(Ul(m,e),(([e,t])=>[!0,e,t]),(()=>[!1,...kn(Vt(e))])),gt=e=>Fl(p)||Fl(J[e])?0:Wl(e?on(p):p,((t,l)=>Wl(t,((t,n)=>Wl(t,((t,r)=>he(J[e],[l,n,r],t))))))),bt=e=>Fl(g)||Fl(D[e])?0:Wl(e?nn(g):g,((t,l)=>he(D[e],[l],t))),vt=(e,t,l,n)=>{if(!Fl(e))return he(t,n,(()=>en(e))),Xl(e,((e,t)=>he(l,[...null!=n?n:[],e],1==t))),1},ft=e=>{const t=Lt();t!=l&&he(T[e],void 0,t);const n=Fl(E[e]),r=Fl(z[e])&&Fl($[e])&&Fl(M[e])&&Fl(R[e])&&Fl(N[e])&&Fl(V[e])&&Fl(L[e])&&n&&Fl(O[e])&&Fl(q[e]),o=Fl(A[e])&&Fl(j[e])&&Fl(P[e])&&Fl(S[e]);if(!r||!o){const t=e?[nn(s),rn(a),nn(i),rn(d),on(u),on(c)]:[s,a,i,d,u,c];if(!r){vt(t[0],O[e],q[e]),Wl(t[1],((t,l)=>vt(t,N[e],V[e],[l]))),Wl(t[2],((t,l)=>{0!=t&&he(L[e],[l],xt(l))}));const l=an();Wl(t[3],((t,r)=>{vt(t,M[e],R[e],[r])&&!n&&(he(E[e],[r,null]),dn(l,r))})),n||Wl(t[5],((t,n)=>{if(!Dl(l,n)){const l=an();Wl(t,(e=>Wl(e,(([t,n],r)=>n!==t?dn(l,r):Ql(e,r))))),Wl(l,(t=>he(E[e],[n,t])))}})),Wl(t[4],((t,l)=>Wl(t,((t,n)=>vt(t,z[e],$[e],[l,n])))))}if(!o){let l;Wl(t[5],((t,n)=>{let r;Wl(t,((t,o)=>{let s;Wl(t,(([t,a],i)=>{a!==t&&(he(A[e],[n,o,i],a,t,mt),l=r=s=1)})),s&&he(j[e],[n,o],mt)})),r&&he(P[e],[n],mt)})),l&&he(S[e],void 0,mt)}}},yt=e=>{const t=zt();t!=n&&he(F[e],void 0,t);const l=Fl(H[e])&&Fl(Q[e]),r=Fl(X[e])&&Fl(B[e]);if(!l||!r){const t=e?[nn(h),nn(m)]:[h,m];if(l||vt(t[0],H[e],Q[e]),!r){let l;Wl(t[1],(([t,n],r)=>{n!==t&&(he(X[e],[r],n,t,pt),l=1)})),l&&he(B[e],void 0,pt)}}},It=(e,...t)=>(_t((()=>e(...Ae(t,ue)))),ll),wt=()=>ln(k),Ct=()=>Kl(k),kt=e=>Kl(Ul(C,ue(e))),xt=e=>zl(Ul(k,ue(e))),Tt=e=>Kl(Ul(k,ue(e))),St=(e,t,l,n=0,r)=>{return Ae(we(ze((o=Ul(k,ue(e)),s=(e,l)=>[be(t)?l:Ul(e,ue(t)),l],Ae([...null!=(a=null==o?void 0:o.entries())?a:[]],(([e,t])=>s(t,e)))),(([e],[t])=>{return((null!=(n=e)?n:0)<(null!=(r=t)?r:0)?-1:1)*(l?-1:1);var n,r})),n,be(r)?r:n+r),(([,e])=>e));var o,s,a},Ot=(e,t)=>Kl(Ul(Ul(k,ue(e)),ue(t))),qt=(e,t,l)=>Ul(Ul(Ul(k,ue(e)),ue(t)),ue(l)),Pt=()=>en(x),Nt=()=>Kl(x),Vt=e=>Ul(x,ue(e)),Lt=()=>!Fl(k),Mt=e=>Dl(k,ue(e)),Et=(e,t)=>Dl(Ul(C,ue(e)),ue(t)),Rt=(e,t)=>Dl(Ul(k,ue(e)),ue(t)),jt=(e,t,l)=>Dl(Ul(Ul(k,ue(e)),ue(t)),ue(l)),zt=()=>!Fl(x),$t=e=>Dl(x,ue(e)),Ft=e=>It((()=>(e=>tt(e,xe,ct))(e)?Ee(e):0)),Bt=e=>It((()=>Oe(e)?He(e):0)),Ht=e=>{try{Me(nt(e))}catch(e){}return ll},Wt=t=>It((()=>{if((e=tt(t,(e=>tt(e,ge))))&&(Ve(t),!Fl(k))){const e=wt();Gt(),Ft(e)}})),Qt=e=>It((()=>{if(t=(e=>tt(e,ge))(e)){const l=Pt();Zt(),Xt(),t=!0,Le(e),Bt(l)}})),Gt=()=>It((()=>Ee({}))),Kt=e=>It((e=>Dl(k,e)?Ge(e):0),e),Ut=(e,t)=>It(((e,t)=>ve(Ul(k,e),(l=>Dl(l,t)?Ke(e,l,t):0))),e,t),Xt=()=>It((()=>He({}))),Yt=()=>It((()=>{Ve({}),e=!1})),Zt=()=>It((()=>{Le({}),t=!1})),_t=(e,t)=>{if(-1!=r){el();const l=e();return tl(t),l}},el=()=>{var e;return-1!=r&&r++,1==r&&(null==(e=o[0])||e.call(o),he(ie)),ll},tl=e=>{var t,b;return r>0&&(r--,0==r&&(r=1,gt(1),Fl(c)||ft(1),bt(1),Fl(m)||yt(1),(null==e?void 0:e(ll))&&(Wl(c,((e,t)=>Wl(e,((e,l)=>Wl(e,(([e],n)=>Jt(ll,t,l,n,e))))))),Hl(c),Wl(m,(([e],t)=>Dt(ll,t,e))),Hl(m)),he(de[0],void 0),r=-1,gt(0),Fl(c)||ft(0),bt(0),Fl(m)||yt(0),null==(t=o[1])||t.call(o),he(de[1],void 0),null==(b=o[2])||b.call(o),r=0,l=Lt(),n=zt(),$e([s,a,i,d,u,c,p,h,m,g],Hl))),ll},ll={getContent:()=>[wt(),Pt()],getTables:wt,getTableIds:Ct,getTable:e=>tn(Ul(k,ue(e))),getTableCellIds:kt,getRowCount:xt,getRowIds:Tt,getSortedRowIds:St,getRow:(e,t)=>en(Ul(Ul(k,ue(e)),ue(t))),getCellIds:Ot,getCell:qt,getValues:Pt,getValueIds:Nt,getValue:Vt,hasTables:Lt,hasTable:Mt,hasTableCell:Et,hasRow:Rt,hasCell:jt,hasValues:zt,hasValue:$t,getTablesJson:()=>rt(k),getValuesJson:()=>rt(x),getJson:()=>rt([k,x]),getTablesSchemaJson:()=>rt(b),getValuesSchemaJson:()=>rt(f),getSchemaJson:()=>rt([b,f]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>It((()=>{const t=ye(e)?e():e;ke(t)&&(([e,t])=>{(et(e)?Gt:Ft)(e),(et(t)?Xt:Bt)(t)})(t)})),setTables:Ft,setTable:(e,t)=>It((e=>xe(t,e)?Re(e,t):0),e),setRow:(e,t,l)=>It(((e,t)=>Te(e,t,l)?je(e,Qe(e),t,l):0),e,t),addRow:(e,t,l=!0)=>_t((()=>{let n;return Te(e,n,t)&&(e=ue(e),je(e,Qe(e),n=((e,t)=>{const[l]=Ul(w,e);let n;do{n=l(t)}while(Dl(Ul(k,e),n));return n})(e,l?1:0),t)),n})),setPartialRow:(e,t,l)=>It(((e,t)=>{if(Te(e,t,l,1)){const n=Qe(e);_e(l,((l,r)=>Fe(e,n,t,r,l)))}}),e,t),setCell:(e,t,l,n)=>It(((e,t,l)=>ve(Se(e,t,l,ye(n)?n(qt(e,t,l)):n),(n=>Fe(e,Qe(e),t,l,n)))),e,t,l),setValues:Bt,setPartialValues:e=>It((()=>Oe(e,1)?_e(e,((e,t)=>We(t,e))):0)),setValue:(e,t)=>It((e=>ve(qe(e,ye(t)?t(Vt(e)):t),(t=>We(e,t)))),e),applyChanges:e=>It((()=>{_e(e[0],((e,t)=>be(e)?Kt(t):_e(e,((e,l)=>be(e)?Ut(t,l):_e(e,((e,n)=>Jt(ll,t,l,n,e))))))),_e(e[1],((e,t)=>Dt(ll,t,e)))})),setTablesJson:Ht,setValuesJson:e=>{try{Be(nt(e))}catch(e){}return ll},setJson:e=>It((()=>{try{const[t,l]=nt(e);Me(t),Be(l)}catch(t){Ht(e)}})),setTablesSchema:Wt,setValuesSchema:Qt,setSchema:(e,t)=>It((()=>{Wt(e),Qt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,l,n)=>It(((e,t,l)=>ve(Ul(k,e),(r=>ve(Ul(r,t),(o=>Dl(o,l)?Xe(e,r,t,o,l,n):0))))),e,t,l),delValues:Xt,delValue:e=>It((e=>Dl(x,e)?lt(e):0),e),delTablesSchema:Yt,delValuesSchema:Zt,delSchema:()=>It((()=>{Yt(),Zt()})),transaction:_t,startTransaction:el,getTransactionChanges:()=>[en(c,((e,t)=>-1===Ul(s,t)?void 0:en(e,((e,l)=>-1===Ul(Ul(d,t),l)?void 0:en(e,(([,e])=>e),(e=>On(e)))),Fl,et)),Fl,et),en(m,(([,e])=>e),(e=>On(e))),1],getTransactionLog:()=>[!Fl(c),!Fl(m),ln(c,Sn,On),ln(p),en(m,Sn,On),en(g),en(s),tn(d),ln(u),en(h)],finishTransaction:tl,forEachTable:e=>Wl(k,((t,l)=>e(l,(e=>Wl(t,((t,l)=>e(l,(e=>Xl(t,e))))))))),forEachTableCell:(e,t)=>Xl(Ul(C,ue(e)),t),forEachRow:(e,t)=>Wl(Ul(k,ue(e)),((e,l)=>t(l,(t=>Xl(e,t))))),forEachCell:(e,t,l)=>Xl(Ul(Ul(k,ue(e)),ue(t)),l),forEachValue:e=>Xl(x,e),addSortedRowIdsListener:(e,t,l,n,r,o,s)=>{let a=St(e,t,l,n,r);return ce((()=>{const s=St(e,t,l,n,r);var i,d,u;d=a,Ce(i=s)===Ce(d)&&(u=(e,t)=>d[t]===e,i.every(u))||(a=s,o(ll,e,t,l,n,r,a))}),E[s?1:0],[e,t],[Ct])},addStartTransactionListener:e=>ce(e,ie),addWillFinishTransactionListener:e=>ce(e,de[0]),addDidFinishTransactionListener:e=>ce(e,de[1]),callListener:e=>(pe(e),ll),delListener:e=>(me(e),ll),getListenerStats:()=>({hasTables:xn(T),tables:xn(S),tableIds:xn(O),hasTable:xn(q),table:xn(P),tableCellIds:xn(N),hasTableCell:xn(V,Al),rowCount:xn(L),rowIds:xn(M),sortedRowIds:xn(E),hasRow:xn(R,Al),row:xn(j,Al),cellIds:xn(z,Al),hasCell:xn($,Jl),cell:xn(A,Jl),invalidCell:xn(J,Jl),hasValues:xn(F),values:xn(B),valueIds:xn(H),hasValue:xn(Q),value:xn(X),invalidValue:xn(D),transaction:$l(ie)+xn(de)}),isMergeable:()=>!1,createStore:Pn,addListener:ce,callListeners:he,setInternalListeners:(e,t,l,n,r)=>o=[e,t,l,n,r]};return _e({[U+Z]:[0,T,[],()=>[Lt()]],[Z]:[0,S],[_]:[0,O],[U+Y]:[1,q,[Ct],e=>[Mt(...e)]],[Y]:[1,P,[Ct]],[Y+re]:[1,N,[Ct]],[U+Y+ne]:[2,V,[Ct,kt],e=>[Et(...e)]],[te]:[1,L,[Ct]],[le]:[1,M,[Ct]],[U+ee]:[2,R,[Ct,Tt],e=>[Rt(...e)]],[ee]:[2,j,[Ct,Tt]],[re]:[2,z,[Ct,Tt]],[U+ne]:[3,$,[Ct,Tt,Ot],e=>[jt(...e)]],[ne]:[3,A,[Ct,Tt,Ot],e=>kn(qt(...e))],InvalidCell:[3,J],[U+se]:[0,F,[],()=>[zt()]],[se]:[0,B],[ae]:[0,H],[U+oe]:[1,Q,[Nt],e=>[$t(...e)]],[oe]:[1,X,[Nt],e=>kn(Vt(e[0]))],InvalidValue:[1,D]},(([e,t,l,n],r)=>{ll["add"+r+"Listener"]=(...r)=>ce(r[e],t[r[e+1]?1:0],e>0?we(r,0,e):void 0,l,n)})),Ue(ll)},Nn=({position:e="right",open:t=!1})=>{const l=A(Pn),n=at.indexOf(e);return J(l,(e=>{return t=ot,l=sessionStorage,((e,t,l,n,r,o,s,a={},i=0,d=[])=>{let u,c,h,m=0,p=0,g=0;Zl(yn,d,(()=>0)),Zl(In,d,(()=>[]));const b=Gl(),[v,f,y,I,w]=((e=1,t,l)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!l),([[e],[t]])=>!et(e)||!et(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!et(e)||!et(t),t.setContent]:ke("Store type not supported by this Persister"))(s,e,i),[C,k,x]=hn((()=>L)),T=e=>{e!=m&&(m=e,k(b,void 0,m))},S=t=>{(v&&Ie(null==t?void 0:t[0])?1===(null==t?void 0:t[2])?e.applyMergeableChanges:e.setMergeableContent:1===(null==t?void 0:t[2])?e.applyChanges:e.setContent)(t)},O=e=>fn(void 0,null,(function*(){return 2!=m&&(T(1),p++,yield V((()=>fn(void 0,null,(function*(){try{const l=yield t();Ie(l)?S(l):e?w(e):ke("Content is not an array: "+l)}catch(t){e&&w(e)}T(0)}))))),L})),q=()=>(c&&(r(c),c=void 0),L),P=e=>fn(void 0,null,(function*(){return 1!=m&&(T(2),g++,yield V((()=>fn(void 0,null,(function*(){try{yield l(f,e)}catch(e){}T(0)}))))),L})),N=()=>(h&&(e.delListener(h),h=void 0),L),V=(...e)=>fn(void 0,null,(function*(){return De(Ul(In,d),...e),yield fn(void 0,null,(function*(){if(!Ul(yn,d)){for(Yl(yn,d,1);!be(u=Fe(Ul(In,d)));)try{yield u()}catch(e){}Yl(yn,d,0)}})),L})),L=((e,t)=>{for(var l in t||(t={}))gn.call(t,l)&&vn(e,l,t[l]);if(pn)for(var l of pn(t))bn.call(t,l)&&vn(e,l,t[l]);return e})({load:O,startAutoLoad:e=>fn(void 0,null,(function*(){q(),yield O(e);try{c=yield n(((e,t)=>fn(void 0,null,(function*(){t||e?2!=m&&(T(1),p++,S(null!=t?t:e),T(0)):yield O()}))))}catch(e){}return L})),stopAutoLoad:q,isAutoLoading:()=>!be(c),save:P,startAutoSave:()=>fn(void 0,null,(function*(){return N(),yield P(),h=e.addDidFinishTransactionListener((()=>{const e=y();I(e)&&P(e)})),L})),stopAutoSave:N,isAutoSaving:()=>!be(h),getStatus:()=>m,addStatusListener:e=>C(e,b),delListener:t=>(x(t),e),schedule:V,getStore:()=>e,destroy:()=>(Ul(In,d).splice(0,void 0),q().stopAutoSave()),getStats:()=>({loads:p,saves:g})},a);return Ue(L)})(e,(()=>wn(void 0,null,(function*(){return e=l.getItem(t),nt(e,((e,t)=>"￼"===t?void 0:t));var e}))),(e=>wn(void 0,null,(function*(){return l.setItem(t,(n=e(),lt(n,((e,t)=>void 0===t?"￼":t))));var n}))),(e=>{const n=n=>{if(n.storageArea===l&&n.key===t)try{e(nt(n.newValue))}catch(t){e()}};return ce.addEventListener(Cn,n),n}),(e=>ce.removeEventListener(Cn,e)),0,3,{getStorageName:()=>t});var t,l}),void 0,(e=>{return l=function*(){yield e.load([{},{position:-1==n?1:n,open:!!t}]),yield e.startAutoSave()},new Promise(((e,t)=>{var n=e=>{try{o(l.next(e))}catch(e){t(e)}},r=e=>{try{o(l.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);o((l=l.apply(void 0,null)).next())}));var l})),Oe(Te,null,Oe("aside",{id:ot},Oe(zt,{s:l}),Oe(Rl,{s:l})),Oe("style",null,jt))};export{Nn as Inspector};
